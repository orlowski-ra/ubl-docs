<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struktura Invoice - UBL 2.1 & Peppol 3.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6; color: #24292e; background-color: #f6f8fa; padding: 20px;
        }
        .container {
            max-width: 1900px; margin: 0 auto; background: white;
            padding: 30px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        h1 { color: #0366d6; margin-bottom: 10px; font-size: 2em; border-bottom: 2px solid #0366d6; padding-bottom: 10px; }
        .subtitle { color: #586069; margin-bottom: 20px; font-size: 1.1em; }

        .tabs { display: flex; gap: 5px; margin-bottom: 20px; border-bottom: 2px solid #e1e4e8; }
        .tab {
            padding: 12px 24px; background: #f6f8fa; border: none; border-radius: 6px 6px 0 0;
            cursor: pointer; font-size: 16px; font-weight: 600; color: #586069; transition: all 0.2s;
        }
        .tab:hover { background: #e1e4e8; color: #24292e; }
        .tab.active { background: white; color: #0366d6; border-bottom: 2px solid #0366d6; margin-bottom: -2px; }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .info-box {
            background: #f1f8ff; border: 1px solid #c8e1ff; border-radius: 6px;
            padding: 15px; margin-bottom: 20px;
        }
        .info-box h2 { color: #0366d6; font-size: 1.2em; margin-bottom: 10px; }

        .rules-section {
            background: #fff8e1; border: 2px solid #ffa726; border-radius: 6px;
            padding: 20px; margin: 20px 0;
        }
        .rules-section h2 {
            color: #e65100; margin-bottom: 15px; display: flex;
            align-items: center; gap: 10px;
        }
        .rule-category { margin-bottom: 25px; }
        .rule-category h3 {
            color: #424242; font-size: 1.1em; margin-bottom: 10px;
            padding-bottom: 5px; border-bottom: 1px solid #ddd;
        }
        .rule-item {
            background: white; border-left: 4px solid #ffa726; padding: 12px 15px;
            margin-bottom: 10px; border-radius: 4px; font-size: 14px;
        }
        .rule-critical { border-left-color: #d32f2f; background: #ffebee; }
        .rule-warning { border-left-color: #ffa726; background: #fff8e1; }
        .rule-info { border-left-color: #42a5f5; background: #e3f2fd; }

        .rule-code {
            font-family: 'Courier New', monospace; font-size: 11px;
            background: #f5f5f5; padding: 2px 6px; border-radius: 3px;
            color: #d32f2f; font-weight: 600; margin-right: 8px;
        }
        .rule-title { font-weight: 600; color: #1976d2; margin-bottom: 4px; }
        .rule-desc { color: #616161; line-height: 1.5; }

        .controls {
            margin-bottom: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap;
        }
        .search-box {
            padding: 10px; flex: 1; min-width: 300px; max-width: 500px;
            border: 2px solid #d1d5da; border-radius: 6px; font-size: 14px;
        }
        .search-box:focus { outline: none; border-color: #0366d6; }

        .btn {
            padding: 8px 16px; border: 1px solid #d1d5da; border-radius: 6px;
            background: white; cursor: pointer; font-size: 14px; transition: all 0.2s;
        }
        .btn:hover { background: #f6f8fa; border-color: #0366d6; }

        .filter-group {
            display: flex; gap: 10px; align-items: center;
            padding: 8px 12px; background: #f6f8fa; border-radius: 6px;
        }
        .filter-group label {
            display: flex; align-items: center; gap: 5px; font-size: 14px; cursor: pointer;
        }

        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px; }
        thead { background-color: #f6f8fa; position: sticky; top: 0; z-index: 10; }
        th {
            text-align: left; padding: 10px 8px; border: 1px solid #d1d5da;
            font-weight: 600; color: #24292e; font-size: 12px;
        }
        td { padding: 8px; border: 1px solid #e1e4e8; vertical-align: top; }
        tbody tr:hover { background-color: #f6f8fa; }

        .card-cell {
            font-family: 'Courier New', monospace; font-weight: 600;
            white-space: nowrap; min-width: 50px; font-size: 11px;
        }
        .support-cell { text-align: center; font-weight: 600; min-width: 60px; }
        .support-badge {
            display: inline-block; padding: 2px 6px; border-radius: 3px;
            font-size: 10px; font-weight: 600;
        }
        .support-both { background: #dcffe4; color: #22863a; }
        .support-ubl { background: #e1f5ff; color: #0366d6; }
        .support-peppol { background: #fff5b1; color: #735c0f; }

        .required { color: #d73a49; }
        .optional { color: #28a745; }

        .name-cell {
            font-family: 'Courier New', monospace; font-size: 12px;
            position: relative; min-width: 300px;
        }
        .toggle-btn {
            cursor: pointer; user-select: none; display: inline-block; width: 18px;
            text-align: center; font-weight: bold; color: #0366d6; margin-right: 5px;
        }
        .toggle-btn:hover { color: #0056b3; }
        .no-children { width: 18px; display: inline-block; }

        .indent-0 { padding-left: 10px; font-weight: 600; background-color: #f6f8fa; }
        .indent-1 { padding-left: 32px; }
        .indent-2 { padding-left: 54px; background-color: #fafbfc; }
        .indent-3 { padding-left: 76px; }
        .indent-4 { padding-left: 98px; background-color: #fafbfc; }
        .indent-5 { padding-left: 120px; }
        .indent-6 { padding-left: 142px; background-color: #fafbfc; }

        .bullet { color: #6a737d; margin-right: 4px; font-size: 10px; }

        .datatype {
            display: inline-block; padding: 2px 5px; border-radius: 3px;
            font-size: 10px; font-weight: 600; font-family: 'Courier New', monospace;
            min-width: 65px; text-align: center;
        }
        .dt-text { background: #e3f2fd; color: #1565c0; }
        .dt-amount { background: #f3e5f5; color: #6a1b9a; }
        .dt-unitprice { background: #f3e5f5; color: #6a1b9a; border: 1px dashed #9c27b0; }
        .dt-percent { background: #fff3e0; color: #e65100; }
        .dt-quantity { background: #fff3e0; color: #e65100; }
        .dt-code { background: #e8f5e9; color: #2e7d32; }
        .dt-identifier { background: #fce4ec; color: #c2185b; }
        .dt-date { background: #fff9c4; color: #f57f17; }
        .dt-boolean { background: #e0f2f1; color: #00695c; }
        .dt-binary { background: #f1f8e9; color: #558b2f; }
        .dt-docref { background: #fce4ec; color: #ad1457; }

        .description-cell { font-size: 12px; line-height: 1.4; }
        .namespace { color: #6f42c1; font-weight: 600; }

        .hidden { display: none; }
        .highlight { background-color: #fff3cd !important; }

        .legend {
            display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; font-size: 12px;
        }
        .legend-item { display: flex; align-items: center; gap: 5px; }
        .legend-box {
            width: 16px; height: 16px; border: 1px solid #d1d5da; border-radius: 3px;
        }
        .collapsed-indicator {
            color: #6a737d; font-style: italic; font-size: 10px; margin-left: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìã Struktura Invoice - UBL 2.1 & Peppol BIS 3.0</h1>
        <p class="subtitle">Kompletna dokumentacja z typami danych i regu≈Çami walidacji biznesowej</p>

<div class="tabs">
            <button class="tab active" onclick="switchTab(event, 'ubl')">UBL 2.1 Invoice</button>
            <button class="tab" onclick="switchTab(event, 'peppol')">Peppol BIS 3.0 Invoice</button>
            <button class="tab" onclick="switchTab(event, 'rules')">‚ö†Ô∏è Regu≈Çy Biznesowe</button>
            <button class="tab" onclick="switchTab(event, 'codelists')">üìö S≈Çowniki</button>
        </div>
        
        <!-- UBL TAB -->
        <div id="ubl-tab" class="tab-content active">
            <div class="info-box">
                <h2>O UBL 2.1 Invoice</h2>
                <p><strong>Standard:</strong> Universal Business Language (UBL) Version 2.1</p>
                <p><strong>Typ dokumentu:</strong> Invoice (ABIE)</p>
                <p><strong>Opis:</strong> Uniwersalny format faktury elektronicznej zgodny ze standardem OASIS UBL 2.1</p>
                <p><strong>Namespace:</strong> <span class="namespace">urn:oasis:names:specification:ubl:schema:xsd:Invoice-2</span></p>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-box support-both"></div><span>Wspierane przez UBL i Peppol</span></div>
                <div class="legend-item"><div class="legend-box support-ubl"></div><span>Tylko UBL</span></div>
                <div class="legend-item"><span><strong class="required">1..1, 1..n</strong> = Wymagane</span></div>
                <div class="legend-item"><span><strong class="optional">0..1, 0..n</strong> = Opcjonalne</span></div>
            </div>

            <div class="controls">
                <input type="text" class="search-box" id="searchBoxUbl" 
                       placeholder="Szukaj element√≥w... (wyniki pokazujƒÖ wsparcie i typ danych)">
                <button class="btn" onclick="expandAll('ubl')">Rozwi≈Ñ wszystko</button>
                <button class="btn" onclick="collapseAll('ubl')">Zwi≈Ñ wszystko</button>
                <button class="btn" onclick="expandLevel('ubl', 2)">Poziom 1-2</button>
                <div class="filter-group">
                    <label><input type="checkbox" id="filterBoth" onchange="applyFilter('ubl')"> Oba</label>
                    <label><input type="checkbox" id="filterUblOnly" onchange="applyFilter('ubl')"> Tylko UBL</label>
                </div>
            </div>

            <table id="structureTableUbl">
                <thead>
                    <tr>
                        <th style="width: 55px;">Card</th>
                        <th style="width: 350px;">Nazwa elementu</th>
                        <th style="width: 65px;">Wsparcie</th>
                        <th style="width: 90px;">Typ danych</th>
                        <th>Opis biznesowy</th>
                    </tr>
                </thead>
                <tbody id="tableBodyUbl"></tbody>
            </table>
        </div>

        <!-- PEPPOL TAB -->
        <div id="peppol-tab" class="tab-content">
            <div class="info-box">
                <h2>O Peppol BIS 3.0 Invoice</h2>
                <p><strong>Standard:</strong> Peppol Business Interoperability Specification (BIS) Billing 3.0</p>
                <p><strong>Bazuje na:</strong> UBL 2.1 (podzbi√≥r + customizacja zgodna z EN 16931)</p>
                <p><strong>Profile ID:</strong> urn:fdc:peppol.eu:2017:poacc:billing:01:1.0</p>
                <p><strong>Opis:</strong> Format faktury zgodny z Peppol do wymiany pan-europejskiej</p>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-box support-both"></div><span>UBL i Peppol</span></div>
                <div class="legend-item"><div class="legend-box support-peppol"></div><span>Specyficzne dla Peppol</span></div>
                <div class="legend-item"><span><strong class="required">1..1, 1..n</strong> = Wymagane</span></div>
                <div class="legend-item"><span><strong class="optional">0..1, 0..n</strong> = Opcjonalne</span></div>
            </div>

            <div class="controls">
                <input type="text" class="search-box" id="searchBoxPeppol" 
                       placeholder="Szukaj element√≥w... (wyniki pokazujƒÖ wsparcie i typ danych)">
                <button class="btn" onclick="expandAll('peppol')">Rozwi≈Ñ wszystko</button>
                <button class="btn" onclick="collapseAll('peppol')">Zwi≈Ñ wszystko</button>
                <button class="btn" onclick="expandLevel('peppol', 2)">Poziom 1-2</button>
                <div class="filter-group">
                    <label><input type="checkbox" id="filterBothP" onchange="applyFilter('peppol')"> Oba</label>
                    <label><input type="checkbox" id="filterPeppolOnly" onchange="applyFilter('peppol')"> Peppol</label>
                </div>
            </div>

            <table id="structureTablePeppol">
                <thead>
                    <tr>
                        <th style="width: 55px;">Card</th>
                        <th style="width: 350px;">Nazwa elementu</th>
                        <th style="width: 65px;">Wsparcie</th>
                        <th style="width: 90px;">Typ danych</th>
                        <th>Opis biznesowy</th>
                    </tr>
                </thead>
                <tbody id="tableBodyPeppol"></tbody>
            </table>
        </div>

        <div class="info-box" style="margin-top: 30px;">
            <h2>üìñ Legenda typ√≥w danych</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px; margin-top: 10px; font-size: 13px;">
                <div><span class="datatype dt-text">Text</span> - Tekst (string)</div>
                <div><span class="datatype dt-amount">Amount</span> - Kwota (decimal, max 2 miejsca)</div>
                <div><span class="datatype dt-unitprice">UnitPrice</span> - Cena jedn. (decimal, bez limitu)</div>
                <div><span class="datatype dt-percent">Percent</span> - Procent (decimal)</div>
                <div><span class="datatype dt-quantity">Quantity</span> - Ilo≈õƒá (decimal + unitCode)</div>
                <div><span class="datatype dt-code">Code</span> - Kod z listy</div>
                <div><span class="datatype dt-identifier">Identifier</span> - Identyfikator</div>
                <div><span class="datatype dt-date">Date</span> - Data (YYYY-MM-DD)</div>
                <div><span class="datatype dt-boolean">Boolean</span> - true/false</div>
                <div><span class="datatype dt-binary">Binary</span> - Dane binarne (Base64)</div>
                <div><span class="datatype dt-docref">DocRef</span> - Referencja dokumentu</div>
            </div>
        </div>

        <!-- RULES TAB -->
        <div id="rules-tab" class="tab-content">
            <div class="info-box">
                <h2>‚ö†Ô∏è Regu≈Çy biznesowe i walidacyjne</h2>
                <p>Poni≈ºej znajdziesz kluczowe regu≈Çy walidacji dla faktur UBL 2.1 i Peppol BIS 3.0.</p>
                <p><strong>Legenda:</strong></p>
                <ul style="margin-left: 25px; margin-top: 8px; line-height: 1.8;">
                    <li><span style="color: #d32f2f;">‚óè</span> <strong>KRYTYCZNE</strong> - B≈ÇƒÖd powoduje odrzucenie faktury</li>
                    <li><span style="color: #ffa726;">‚óè</span> <strong>OSTRZE≈ªENIE</strong> - Mo≈ºe powodowaƒá problemy przetwarzania</li>
                    <li><span style="color: #42a5f5;">‚óè</span> <strong>INFO</strong> - Zalecenie najlepszych praktyk</li>
                </ul>
            </div>

            <div class="rules-section">
                <h2>üìê Regu≈Çy Obliczeniowe i Kwotowe</h2>

                <div class="rule-category">
                    <h3>Kwoty i waluty</h3>

                    <div class="rule-item rule-critical">
                        <div class="rule-title">
                            <span class="rule-code">BR-01</span>
                            PriceAmount musi byƒá dodatni lub zero
                        </div>
                        <div class="rule-desc">
                            Pole <code>cac:Price/cbc:PriceAmount</code> w linii faktury musi zawieraƒá warto≈õƒá ‚â• 0.
                            Cena jednostkowa nigdy nie mo≈ºe byƒá ujemna (nawet dla faktur korygujƒÖcych).
                        </div>
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-02</span>
                        <strong>LineExtensionAmount = ((PriceAmount √∑ BaseQuantity) √ó InvoicedQuantity) + Charges - Allowances</strong><br>
                        Kwota netto linii musi byƒá poprawnie obliczona. ZaokrƒÖglenie do 2 miejsc po przecinku.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-09</span>
                        <strong>Sum of invoice line net amounts = ‚àë(LineExtensionAmount)</strong><br>
                        Suma kwot netto linii (<code>cac:LegalMonetaryTotal/cbc:LineExtensionAmount</code>) musi r√≥wnaƒá siƒô sumie wszystkich <code>cac:InvoiceLine/cbc:LineExtensionAmount</code>.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-10</span>
                        <strong>TaxExclusiveAmount = LineExtensionAmount - AllowanceTotalAmount + ChargeTotalAmount</strong><br>
                        Kwota bez VAT musi byƒá poprawnie obliczona po uwzglƒôdnieniu rabat√≥w/op≈Çat dokumentowych.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-11</span>
                        <strong>TaxInclusiveAmount = TaxExclusiveAmount + TaxAmount</strong><br>
                        Kwota brutto = kwota netto + VAT.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-12</span>
                        <strong>PayableAmount = TaxInclusiveAmount - PrepaidAmount + PayableRoundingAmount</strong><br>
                        Kwota do zap≈Çaty musi uwzglƒôdniaƒá przedp≈Çaty i zaokrƒÖglenia.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-13</span>
                        <strong>AllowanceTotalAmount = ‚àë(AllowanceCharge[ChargeIndicator=false]/Amount)</strong><br>
                        Suma rabat√≥w dokumentowych musi byƒá prawid≈Çowa.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-14</span>
                        <strong>ChargeTotalAmount = ‚àë(AllowanceCharge[ChargeIndicator=true]/Amount)</strong><br>
                        Suma op≈Çat dokumentowych musi byƒá prawid≈Çowa.
                    </div>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">BR-05</span>
                        <strong>DocumentCurrencyCode jest wymagany</strong><br>
                        Waluta dokumentu (<code>cbc:DocumentCurrencyCode</code>) musi byƒá podana (ISO 4217: EUR, USD, GBP, PLN, etc.).
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">BR-06</span>
                        <strong>Kwoty Amount zaokrƒÖglane do 2 miejsc po przecinku</strong><br>
                        Wszystkie kwoty typu Amount (nie UnitPrice!) muszƒÖ byƒá zaokrƒÖglone do max 2 miejsc dziesiƒôtnych.
                    </div>
                </div>

                <div class="rule-category">
                    <h3>VAT i podatki</h3>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-S-01</span>
                        <strong>Kategoria VAT 'S' (Standard) wymaga TaxCategory/Percent > 0</strong><br>
                        Je≈õli <code>cac:TaxCategory/cbc:ID = 'S'</code>, pole <code>cbc:Percent</code> musi byƒá wiƒôksze od zera.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-Z-01</span>
                        <strong>Kategoria VAT 'Z' (Zero rated) wymaga Percent = 0</strong><br>
                        Dla stawki 0% (<code>cbc:ID = 'Z'</code>) pole Percent musi wynosiƒá dok≈Çadnie 0.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-E-01</span>
                        <strong>Kategoria VAT 'E' (Exempt) wymaga TaxExemptionReasonCode lub TaxExemptionReason</strong><br>
                        Zwolnienie z VAT musi mieƒá podany kod przyczyny lub tekstowy opis przyczyny.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-16</span>
                        <strong>TaxTotal/TaxAmount = ‚àë(TaxSubtotal/TaxAmount)</strong><br>
                        Suma VAT na dokumencie musi r√≥wnaƒá siƒô sumie kwot VAT ze wszystkich TaxSubtotal.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-17</span>
                        <strong>TaxSubtotal/TaxAmount = TaxSubtotal/TaxableAmount √ó (TaxCategory/Percent √∑ 100)</strong><br>
                        Kwota VAT w ka≈ºdym TaxSubtotal musi byƒá prawid≈Çowo obliczona (z uwzglƒôdnieniem zaokrƒÖgle≈Ñ).
                    </div>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">BR-15</span>
                        <strong>Ka≈ºda TaxCategory w liniach musi mieƒá odpowiadajƒÖcy TaxSubtotal</strong><br>
                        Dla ka≈ºdej unikalnej kombinacji (TaxCategory/ID + Percent) z linii musi istnieƒá TaxSubtotal na poziomie dokumentu.
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">BR-IC-01</span>
                        <strong>Dla dostaw wewnƒÖtrzwsp√≥lnotowych (VAT 'K') wymagany VAT nabywcy</strong><br>
                        Je≈õli kategoria VAT = 'K', nabywca musi mieƒá podany numer VAT.
                    </div>
                </div>

                <div class="rule-category">
                    <h3>Allowances i Charges (rabaty/op≈Çaty)</h3>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">BR-36</span>
                        <strong>Je≈õli podano MultiplierFactorNumeric i BaseAmount, to Amount = BaseAmount √ó MultiplierFactorNumeric</strong><br>
                        Rabat/op≈Çata procentowa: kwota musi byƒá poprawnie obliczona z podstawy i procentu (procent jako decimal, np. 0.2 = 20%).
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-37</span>
                        <strong>AllowanceCharge na poziomie dokumentu wymaga TaxCategory</strong><br>
                        Ka≈ºdy rabat/op≈Çata dokumentowa musi mieƒá przypisanƒÖ kategoriƒô VAT.
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">BR-38</span>
                        <strong>ChargeIndicator okre≈õla czy to op≈Çata (true) czy rabat (false)</strong><br>
                        Pole wymagane - musi byƒá jawnie ustawione.
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üìù Regu≈Çy Danych ObowiƒÖzkowych</h2>

                <div class="rule-category">
                    <h3>Identyfikacja dokumentu</h3>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-01</span>
                        <strong>Numer faktury (cbc:ID) jest wymagany</strong><br>
                        Ka≈ºda faktura musi mieƒá unikalny numer.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-02</span>
                        <strong>Data wystawienia (cbc:IssueDate) jest wymagana</strong><br>
                        Format: YYYY-MM-DD (ISO 8601).
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-03</span>
                        <strong>Kod typu faktury (cbc:InvoiceTypeCode) jest wymagany</strong><br>
                        Najczƒôstsze: 380 = Commercial invoice, 381 = Credit note, 384 = Corrected invoice.
                    </div>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">PEPPOL-01</span>
                        <strong>CustomizationID wymagany dla Peppol</strong><br>
                        Musi zawieraƒá: <code>urn:cen.eu:en16931:2017#compliant#urn:fdc:peppol.eu:2017:poacc:billing:3.0</code>
                    </div>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">PEPPOL-02</span>
                        <strong>ProfileID wymagany dla Peppol</strong><br>
                        Musi zawieraƒá: <code>urn:fdc:peppol.eu:2017:poacc:billing:01:1.0</code>
                    </div>
                </div>

                <div class="rule-category">
                    <h3>Partie (Supplier i Customer)</h3>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-04</span>
                        <strong>Nazwa prawna dostawcy (PartyLegalEntity/RegistrationName) jest wymagana</strong><br>
                        AccountingSupplierParty/Party/PartyLegalEntity/cbc:RegistrationName
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-05</span>
                        <strong>Nazwa prawna odbiorcy (PartyLegalEntity/RegistrationName) jest wymagana</strong><br>
                        AccountingCustomerParty/Party/PartyLegalEntity/cbc:RegistrationName
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-CO-06</span>
                        <strong>Kod kraju w adresie dostawcy i odbiorcy jest wymagany</strong><br>
                        PostalAddress/Country/IdentificationCode (ISO 3166-1 alpha-2: PL, DE, FR, etc.)
                    </div>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">PEPPOL-03</span>
                        <strong>EndpointID wymagany dla Supplier i Customer (Peppol)</strong><br>
                        Elektroniczny adres partii (np. GLN, DUNS). Atrybut schemeID okre≈õla typ identyfikatora.
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">BR-CO-07</span>
                        <strong>Je≈õli podano VAT ID, musi byƒá w formacie ISO 3166 + numer</strong><br>
                        Przyk≈Çad: PL1234567890, DE123456789
                    </div>
                </div>

                <div class="rule-category">
                    <h3>Linie faktury</h3>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-21</span>
                        <strong>Ka≈ºda linia musi mieƒá ID</strong><br>
                        <code>cac:InvoiceLine/cbc:ID</code> jest wymagane (zazwyczaj numeracja sekwencyjna: 1, 2, 3...).
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-22</span>
                        <strong>InvoicedQuantity jest wymagana</strong><br>
                        Ilo≈õƒá z kodem jednostki (atrybut unitCode z UN/ECE Rec 20: C62=szt, HUR=godz, KGM=kg, etc.).
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-23</span>
                        <strong>LineExtensionAmount jest wymagany</strong><br>
                        Kwota netto linii (po rabatach/op≈Çatach liniowych, przed VAT).
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-25</span>
                        <strong>Item/Name jest wymagana</strong><br>
                        Nazwa towaru/us≈Çugi w linii.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-26</span>
                        <strong>Item musi mieƒá ClassifiedTaxCategory</strong><br>
                        Ka≈ºda linia musi okre≈õlaƒá kategoriƒô VAT.
                    </div>

                    <div class="rule-item rule-critical">
                        <span class="rule-code">BR-27</span>
                        <strong>Price/PriceAmount jest wymagana</strong><br>
                        Cena jednostkowa netto (zawsze dodatnia lub zero, patrz BR-01).
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üîç Regu≈Çy Format√≥w i Typ√≥w Danych</h2>

                <div class="rule-category">
                    <h3>Daty i czasy</h3>

                    <div class="rule-item rule-warning">
                        <span class="rule-code">DT-01</span>
                        <strong>Daty w formacie ISO 8601: YYYY-MM-DD</strong><br>
                        Przyk≈Çad: <code>2026-02-12</code>. Brak informacji o strefie czasowej.
                    </div>
                </div>

                <div class="rule-category">
                    <h3>Liczby i kwoty</h3>

                    <div class="rule-item rule-info">
                        <span class="rule-code">DT-02</span>
                        <strong>Amount: decimal z max 2 miejscami po przecinku</strong><br>
                        Typ u≈ºywany dla wszystkich kwot pieniƒô≈ºnych (opr√≥cz cen jednostkowych).
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">DT-03</span>
                        <strong>UnitPriceAmount: decimal bez ograniczenia miejsc</strong><br>
                        Cena jednostkowa mo≈ºe mieƒá wiƒôcej ni≈º 2 miejsca (np. 10.12345).
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">DT-04</span>
                        <strong>Percent: decimal bez ograniczenia</strong><br>
                        Warto≈õƒá procentowa (np. 23.0, 8.5, 0.0). Nie u≈ºywaƒá formatu "%" - tylko liczba.
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">DT-05</span>
                        <strong>Quantity: decimal z unitCode</strong><br>
                        Ilo≈õƒá z obowiƒÖzkowym atrybutem unitCode (kod jednostki miary).
                    </div>
                </div>

                <div class="rule-category">
                    <h3>Kody i identyfikatory</h3>

                    <div class="rule-item rule-info">
                        <span class="rule-code">DT-06</span>
                        <strong>Code: string zgodny z listƒÖ kod√≥w</strong><br>
                        Dok≈Çadna warto≈õƒá z okre≈õlonej listy kod√≥w (np. ISO 4217 dla walut, ISO 3166 dla kraj√≥w).
                    </div>

                    <div class="rule-item rule-info">
                        <span class="rule-code">DT-07</span>
                        <strong>Identifier: string z opcjonalnym schemeID</strong><br>
                        ID mo≈ºe mieƒá atrybut schemeID okre≈õlajƒÖcy typ (GLN, DUNS, VAT, etc.).
                    </div>
                </div>
            </div>

            <div class="info-box" style="margin-top: 30px;">
                <h2>üìö ≈πr√≥d≈Ça</h2>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li><strong>UBL 2.1:</strong> <a href="https://docs.oasis-open.org/ubl/os-UBL-2.1/" target="_blank">OASIS UBL 2.1 Specification</a></li>
                    <li><strong>Peppol BIS 3.0:</strong> <a href="https://docs.peppol.eu/poacc/billing/3.0/" target="_blank">Peppol Billing 3.0 Specification</a></li>
                    <li><strong>EN 16931:</strong> European Standard for Electronic Invoicing</li>
                    <li><strong>Walidacja:</strong> <a href="https://ecosio.com/en/peppol-and-xml-document-validator/" target="_blank">Ecosio Validator</a></li>
                </ul>
            </div>
        </div>

        <!-- CODE LISTS TAB -->
        <div id="codelists-tab" class="tab-content">
            <div class="info-box">
                <h2>üìö S≈Çowniki i listy kod√≥w</h2>
                <p>Poni≈ºej znajdziesz wszystkie s≈Çowniki warto≈õci dla p√≥l kodowych i identyfikator√≥w.</p>
                <p>Kliknij nazwƒô s≈Çownika aby rozwinƒÖƒá listƒô warto≈õci.</p>
            </div>

            <div class="rules-section">
                <h2>üí± Waluty (Currency Codes)</h2>
                <div class="rule-category">
                    <h3>ISO 4217 - Kody walut</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>DocumentCurrencyCode</code>, <code>TaxCurrencyCode</code>, <code>PaymentCurrencyCode</code></p>
                    <div class="rule-item rule-info">
                        <strong>Najpopularniejsze waluty:</strong><br>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px; margin-top: 8px;">
                            <div><code>EUR</code> - Euro</div>
                            <div><code>USD</code> - US Dollar</div>
                            <div><code>GBP</code> - British Pound</div>
                            <div><code>PLN</code> - Polski Z≈Çoty</div>
                            <div><code>CHF</code> - Swiss Franc</div>
                            <div><code>SEK</code> - Swedish Krona</div>
                            <div><code>DKK</code> - Danish Krone</div>
                            <div><code>NOK</code> - Norwegian Krone</div>
                            <div><code>CZK</code> - Czech Koruna</div>
                            <div><code>HUF</code> - Hungarian Forint</div>
                            <div><code>RON</code> - Romanian Leu</div>
                            <div><code>BGN</code> - Bulgarian Lev</div>
                            <div><code>HRK</code> - Croatian Kuna</div>
                            <div><code>JPY</code> - Japanese Yen</div>
                            <div><code>CNY</code> - Chinese Yuan</div>
                            <div><code>CAD</code> - Canadian Dollar</div>
                            <div><code>AUD</code> - Australian Dollar</div>
                            <div><code>NZD</code> - New Zealand Dollar</div>
                        </div>
                        <p style="margin-top: 10px;"><strong>Pe≈Çna lista:</strong> <a href="https://www.iso.org/iso-4217-currency-codes.html" target="_blank">ISO 4217 Currency Codes</a></p>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üåç Kraje (Country Codes)</h2>
                <div class="rule-category">
                    <h3>ISO 3166-1 alpha-2 - Kody kraj√≥w</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>PostalAddress/Country/IdentificationCode</code></p>
                    <div class="rule-item rule-info">
                        <strong>Kraje europejskie:</strong><br>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 6px; margin-top: 8px; font-size: 13px;">
                            <div><code>AT</code> - Austria</div>
                            <div><code>BE</code> - Belgia</div>
                            <div><code>BG</code> - Bu≈Çgaria</div>
                            <div><code>HR</code> - Chorwacja</div>
                            <div><code>CY</code> - Cypr</div>
                            <div><code>CZ</code> - Czechy</div>
                            <div><code>DK</code> - Dania</div>
                            <div><code>EE</code> - Estonia</div>
                            <div><code>FI</code> - Finlandia</div>
                            <div><code>FR</code> - Francja</div>
                            <div><code>DE</code> - Niemcy</div>
                            <div><code>GR</code> - Grecja</div>
                            <div><code>HU</code> - Wƒôgry</div>
                            <div><code>IE</code> - Irlandia</div>
                            <div><code>IT</code> - W≈Çochy</div>
                            <div><code>LV</code> - ≈Åotwa</div>
                            <div><code>LT</code> - Litwa</div>
                            <div><code>LU</code> - Luksemburg</div>
                            <div><code>MT</code> - Malta</div>
                            <div><code>NL</code> - Holandia</div>
                            <div><code>PL</code> - Polska</div>
                            <div><code>PT</code> - Portugalia</div>
                            <div><code>RO</code> - Rumunia</div>
                            <div><code>SK</code> - S≈Çowacja</div>
                            <div><code>SI</code> - S≈Çowenia</div>
                            <div><code>ES</code> - Hiszpania</div>
                            <div><code>SE</code> - Szwecja</div>
                            <div><code>GB</code> - Wielka Brytania</div>
                            <div><code>NO</code> - Norwegia</div>
                            <div><code>CH</code> - Szwajcaria</div>
                        </div>
                        <p style="margin-top: 10px;"><strong>Pe≈Çna lista:</strong> <a href="https://www.iso.org/obp/ui/#search/code/" target="_blank">ISO 3166 Country Codes</a></p>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üìã Typy faktur (Invoice Type Codes)</h2>
                <div class="rule-category">
                    <h3>UN/CEFACT 1001 - Document Type Codes</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>InvoiceTypeCode</code></p>
                    <div class="rule-item rule-info">
                        <strong>Najwa≈ºniejsze kody:</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>380</code> - <strong>Commercial invoice</strong> - Faktura handlowa (standardowa)</div>
                            <div><code>381</code> - <strong>Credit note</strong> - Nota kredytowa</div>
                            <div><code>383</code> - <strong>Debit note</strong> - Nota debetowa</div>
                            <div><code>384</code> - <strong>Corrected invoice</strong> - Faktura korygujƒÖca</div>
                            <div><code>386</code> - <strong>Prepayment invoice</strong> - Faktura zaliczkowa</div>
                            <div><code>389</code> - <strong>Self-billed invoice</strong> - Faktura samowystawiona (self-billing)</div>
                            <div><code>751</code> - <strong>Invoice information for accounting purposes</strong> - Faktura ksiƒôgowa</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üí≥ Metody p≈Çatno≈õci (Payment Means Codes)</h2>
                <div class="rule-category">
                    <h3>UN/CEFACT 4461 - Payment Means Codes</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>PaymentMeansCode</code></p>
                    <div class="rule-item rule-info">
                        <strong>Kody metod p≈Çatno≈õci:</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>1</code> - Instrument not defined (nieokre≈õlone)</div>
                            <div><code>10</code> - In cash (got√≥wka)</div>
                            <div><code>20</code> - Cheque (czek)</div>
                            <div><code>30</code> - <strong>Credit transfer</strong> - Przelew bankowy</div>
                            <div><code>31</code> - Debit transfer (polecenie przelewu)</div>
                            <div><code>42</code> - Payment to bank account (na rachunek bankowy)</div>
                            <div><code>48</code> - <strong>Bank card</strong> - Karta p≈Çatnicza</div>
                            <div><code>49</code> - <strong>Direct debit</strong> - Polecenie zap≈Çaty</div>
                            <div><code>50</code> - Payment by postgiro (przekaz pocztowy)</div>
                            <div><code>58</code> - SEPA credit transfer</div>
                            <div><code>59</code> - SEPA direct debit</div>
                            <div><code>97</code> - Clearing between partners (kompensata)</div>
                        </div>
                        <p style="margin-top: 10px;"><strong>Dokumentacja:</strong> <a href="https://unece.org/fileadmin/DAM/trade/untdid/d16b/tred/tred4461.htm" target="_blank">UN/CEFACT 4461</a></p>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üè∑Ô∏è Kategorie VAT (Tax Category Codes)</h2>
                <div class="rule-category">
                    <h3>UN/CEFACT 5305 - Duty or tax or fee category code</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>TaxCategory/ID</code>, <code>ClassifiedTaxCategory/ID</code></p>
                    <div class="rule-item rule-critical">
                        <strong>Kategorie VAT (obowiƒÖzkowe dla Peppol):</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>S</code> - <strong>Standard rate</strong> - Stawka standardowa (wymaga Percent > 0)</div>
                            <div><code>Z</code> - <strong>Zero rated</strong> - Stawka 0% (wymaga Percent = 0)</div>
                            <div><code>E</code> - <strong>Exempt from tax</strong> - Zwolnione z VAT (wymaga ExemptionReason)</div>
                            <div><code>AE</code> - <strong>VAT Reverse Charge</strong> - Odwrotne obciƒÖ≈ºenie</div>
                            <div><code>K</code> - <strong>Intra-Community supply</strong> - Dostawa wewnƒÖtrzwsp√≥lnotowa</div>
                            <div><code>G</code> - <strong>Free export item</strong> - Eksport (stawka 0%)</div>
                            <div><code>O</code> - <strong>Services outside scope of tax</strong> - Us≈Çugi poza zakresem VAT</div>
                            <div><code>L</code> - <strong>Canary Islands general indirect tax</strong> - IGIC (Wyspy Kanaryjskie)</div>
                            <div><code>M</code> - <strong>Tax for production, services and importation in Ceuta and Melilla</strong> - IPSI</div>
                        </div>
                    </div>
                    <div class="rule-item rule-warning">
                        <strong>Dodatkowe kategorie UBL (nie wszystkie wspierane w Peppol):</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8; font-size: 12px;">
                            <div><code>A</code> - Mixed tax rate</div>
                            <div><code>AA</code> - Lower rate</div>
                            <div><code>AB</code> - Exempt for resale</div>
                            <div><code>AC</code> - Value Added Tax (VAT) not now due for payment</div>
                            <div><code>AD</code> - Value Added Tax (VAT) due from previous invoice</div>
                            <div><code>B</code> - Transferred (VAT)</div>
                            <div><code>C</code> - Duty paid by supplier</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üì¶ Jednostki miary (Unit Codes)</h2>
                <div class="rule-category">
                    <h3>UN/ECE Recommendation 20 - Units of Measure</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>InvoicedQuantity@unitCode</code>, <code>BaseQuantity@unitCode</code></p>
                    <div class="rule-item rule-info">
                        <strong>Najczƒô≈õciej u≈ºywane jednostki:</strong><br>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 6px; margin-top: 8px; font-size: 13px;">
                            <div><code>C62</code> - <strong>piece</strong> (sztuka)</div>
                            <div><code>XPP</code> - piece (alternatywna)</div>
                            <div><code>H87</code> - piece (Peppol)</div>
                            <div><code>EA</code> - each (ka≈ºdy)</div>
                            <div><code>HUR</code> - <strong>hour</strong> (godzina)</div>
                            <div><code>DAY</code> - <strong>day</strong> (dzie≈Ñ)</div>
                            <div><code>MON</code> - <strong>month</strong> (miesiƒÖc)</div>
                            <div><code>ANN</code> - <strong>year</strong> (rok)</div>
                            <div><code>KGM</code> - <strong>kilogram</strong></div>
                            <div><code>GRM</code> - gram</div>
                            <div><code>TNE</code> - tonne (tona metryczna)</div>
                            <div><code>LTR</code> - <strong>litre</strong> (litr)</div>
                            <div><code>MTR</code> - <strong>metre</strong> (metr)</div>
                            <div><code>KTM</code> - kilometre</div>
                            <div><code>CMT</code> - centimetre</div>
                            <div><code>MMT</code> - millimetre</div>
                            <div><code>MTK</code> - square metre (m¬≤)</div>
                            <div><code>MTQ</code> - cubic metre (m¬≥)</div>
                            <div><code>KWH</code> - kilowatt hour</div>
                            <div><code>MWH</code> - megawatt hour</div>
                            <div><code>SET</code> - set (komplet)</div>
                            <div><code>PR</code> - pair (para)</div>
                            <div><code>DZN</code> - dozen (tuzin)</div>
                            <div><code>XBX</code> - box (pude≈Çko)</div>
                            <div><code>XPK</code> - package (pakiet)</div>
                        </div>
                        <p style="margin-top: 10px;"><strong>Pe≈Çna lista:</strong> <a href="https://unece.org/trade/cefact/UNLOCODE-Download" target="_blank">UN/ECE Rec 20</a> | <a href="https://docs.peppol.eu/poacc/billing/3.0/codelist/UNECERec20/" target="_blank">Peppol Unit Codes</a></p>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üÜî Schematy identyfikator√≥w (Identifier Schemes)</h2>
                <div class="rule-category">
                    <h3>Electronic Address Scheme (schemeID dla EndpointID)</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>EndpointID@schemeID</code>, <code>PartyIdentification/ID@schemeID</code></p>
                    <div class="rule-item rule-info">
                        <strong>Najwa≈ºniejsze schematy Peppol:</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>0002</code> - System Information et Repertoire des Entreprise et des Etablissements (SIRENE)</div>
                            <div><code>0007</code> - Swedish Organization Number</div>
                            <div><code>0009</code> - <strong>SIRET</strong> (Francja)</div>
                            <div><code>0037</code> - <strong>Finnish Organization Number</strong></div>
                            <div><code>0060</code> - Data Universal Numbering System (DUNS)</div>
                            <div><code>0088</code> - <strong>EAN Location Code (GLN)</strong> - Global Location Number</div>
                            <div><code>0096</code> - Danish Ministry of the Interior and Health</div>
                            <div><code>0106</code> - Dutch Originator's Identification Number</div>
                            <div><code>0135</code> - IT:IPA - Indice delle Pubbliche Amministrazioni</div>
                            <div><code>0184</code> - <strong>DIGST (Niemcy)</strong> - Leitweg-ID</div>
                            <div><code>0192</code> - <strong>Norwegian organization number</strong></div>
                            <div><code>0195</code> - <strong>Singapore Nationwide E-Invoice Framework</strong></div>
                            <div><code>0198</code> - <strong>PEPPOL participant identifier</strong></div>
                            <div><code>0201</code> - <strong>Polish Tax ID (NIP)</strong></div>
                            <div><code>0208</code> - Belgian company registration number</div>
                            <div><code>9901</code> - Bank account (IBAN)</div>
                            <div><code>9906</code> - <strong>VAT number</strong></div>
                            <div><code>9907</code> - Company registration number</div>
                        </div>
                        <p style="margin-top: 10px;"><strong>Pe≈Çna lista:</strong> <a href="https://docs.peppol.eu/poacc/billing/3.0/codelist/eas/" target="_blank">Peppol Electronic Address Scheme</a></p>
                    </div>
                </div>

                <div class="rule-category">
                    <h3>Item Identifier Schemes (schemeID dla StandardItemIdentification)</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>StandardItemIdentification/ID@schemeID</code></p>
                    <div class="rule-item rule-info">
                        <strong>Schematy identyfikacji produkt√≥w:</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>0160</code> - <strong>GTIN (Global Trade Item Number)</strong> - Miƒôdzynarodowy numer artyku≈Çu handlowego</div>
                            <div><code>0088</code> - EAN/UCC (European Article Number)</div>
                            <div><code>SRV</code> - Service code (kod us≈Çugi)</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üìë Kody typ√≥w dokument√≥w (Document Type Codes)</h2>
                <div class="rule-category">
                    <h3>U≈ºywane w: DocumentTypeCode, DocumentReference</h3>
                    <div class="rule-item rule-info">
                        <strong>Referencje dokument√≥w:</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>130</code> - <strong>Invoiced object identifier</strong> - Referencja do obiektu bƒôdƒÖcego przedmiotem faktury</div>
                            <div><code>50</code> - Price/sales catalogue</div>
                            <div><code>82</code> - Metering point ID</div>
                            <div><code>83</code> - File identifier</div>
                            <div><code>84</code> - Drawing</div>
                            <div><code>916</code> - Related document</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üè∑Ô∏è Klasyfikacje produkt√≥w (Commodity Classification)</h2>
                <div class="rule-category">
                    <h3>U≈ºywane w: ItemClassificationCode@listID</h3>
                    <div class="rule-item rule-info">
                        <strong>Systemy klasyfikacji:</strong><br>
                        <div style="margin-top: 8px; line-height: 1.8;">
                            <div><code>STI</code> - <strong>Standardized code</strong></div>
                            <div><code>CPV</code> - <strong>Common Procurement Vocabulary</strong> - Wsp√≥lny S≈Çownik Zam√≥wie≈Ñ (EU)</div>
                            <div><code>UNSPSC</code> - <strong>United Nations Standard Products and Services Code</strong></div>
                            <div><code>TST</code> - <strong>Turnover classification code</strong></div>
                            <div><code>MP</code> - Product number manufacturer</div>
                            <div><code>ZZZ</code> - Mutually defined (wzajemnie okre≈õlone)</div>
                        </div>
                        <p style="margin-top: 10px;">
                            <strong>CPV Browser:</strong> <a href="https://ec.europa.eu/growth/single-market/public-procurement/digital-procurement/european-procurement-vocabulary_en" target="_blank">EU CPV Codes</a><br>
                            <strong>UNSPSC:</strong> <a href="https://www.unspsc.org/" target="_blank">UNSPSC.org</a>
                        </p>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üìÑ Kody powod√≥w rabat√≥w/op≈Çat (Allowance/Charge Reason Codes)</h2>
                <div class="rule-category">
                    <h3>UN/CEFACT 5189 & 7161</h3>
                    <p style="margin-bottom: 10px;">U≈ºywane w: <code>AllowanceChargeReasonCode</code></p>
                    <div class="rule-item rule-info">
                        <strong>Kody powod√≥w rabat√≥w (Allowance):</strong><br>
                        <div style="margin-top: 8px; line-height: 1.6; font-size: 13px;">
                            <div><code>41</code> - Bonus for works ahead of schedule</div>
                            <div><code>42</code> - Other bonus</div>
                            <div><code>60</code> - Manufacturer's consumer discount</div>
                            <div><code>62</code> - Due to military status</div>
                            <div><code>63</code> - Due to work accident</div>
                            <div><code>64</code> - Special agreement</div>
                            <div><code>65</code> - Production error discount</div>
                            <div><code>66</code> - New outlet discount</div>
                            <div><code>67</code> - Sample discount</div>
                            <div><code>68</code> - End-of-range discount</div>
                            <div><code>70</code> - Incoterm discount</div>
                            <div><code>71</code> - Point of sales threshold allowance</div>
                            <div><code>88</code> - Material surcharge/deduction</div>
                            <div><code>95</code> - <strong>Discount</strong> - Rabat</div>
                            <div><code>100</code> - <strong>Special rebate</strong> - Rabat specjalny</div>
                            <div><code>102</code> - Fixed long term discount</div>
                            <div><code>103</code> - Temporary discount</div>
                            <div><code>104</code> - Standard discount</div>
                            <div><code>105</code> - <strong>Volume discount</strong> - Rabat ilo≈õciowy</div>
                        </div>
                    </div>
                    <div class="rule-item rule-info">
                        <strong>Kody powod√≥w op≈Çat (Charge):</strong><br>
                        <div style="margin-top: 8px; line-height: 1.6; font-size: 13px;">
                            <div><code>AA</code> - Advertising</div>
                            <div><code>AAA</code> - Telecommunication</div>
                            <div><code>ABL</code> - Additional packaging</div>
                            <div><code>ADR</code> - Other services</div>
                            <div><code>AEO</code> - <strong>Packaging</strong> - Opakowanie</div>
                            <div><code>FC</code> - <strong>Freight service</strong> - Transport</div>
                            <div><code>FI</code> - <strong>Financing</strong> - Finansowanie</div>
                            <div><code>LA</code> - Labelling</div>
                            <div><code>PC</code> - Packing</div>
                            <div><code>SAA</code> - <strong>Shipping and handling</strong> - Wysy≈Çka i obs≈Çuga</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rules-section">
                <h2>üîó Przydatne linki</h2>
                <div class="rule-category">
                    <div class="rule-item rule-info">
                        <strong>Oficjalna dokumentacja i walidatory:</strong><br>
                        <div style="margin-top: 10px; line-height: 2;">
                            <div>üìò <a href="https://docs.oasis-open.org/ubl/os-UBL-2.1/" target="_blank">OASIS UBL 2.1 Specification</a></div>
                            <div>üìó <a href="https://docs.peppol.eu/poacc/billing/3.0/" target="_blank">Peppol BIS Billing 3.0</a></div>
                            <div>üîç <a href="https://ecosio.com/en/peppol-and-xml-document-validator/" target="_blank">Ecosio Peppol Validator</a></div>
                            <div>‚úÖ <a href="https://test-notier.eu/TC434/validation" target="_blank">CEN TC434 Validator</a></div>
                            <div>üìã <a href="https://docs.peppol.eu/poacc/billing/3.0/codelist/" target="_blank">Peppol Code Lists</a></div>
                            <div>üåê <a href="https://unece.org/trade/uncefact/xml-schemas" target="_blank">UN/CEFACT Code Lists</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        // Complete UBL 2.1 Invoice data structure with data types
        const ublData = [

  {"level":0,"id":"invoice","parent":null,"card":"1..1","name":"Invoice","datatype":"DocRef","desc":"Element g≈Ç√≥wny. Dokument ≈ºƒÖdajƒÖcy zap≈Çaty.","support":"both"},
  {"level":1,"id":"ublversionid","parent":"invoice","card":"0..1","name":"cbc:UBLVersionID","datatype":"Identifier","desc":"Wersja schematu UBL. Warto≈õƒá: 2.1","support":"ubl"},
  {"level":1,"id":"customizationid","parent":"invoice","card":"1..1","name":"cbc:CustomizationID","datatype":"Identifier","desc":"Identyfikuje customizacjƒô UBL (Peppol wymaga konkretnej warto≈õci).","support":"both"},
  {"level":1,"id":"profileid","parent":"invoice","card":"1..1","name":"cbc:ProfileID","datatype":"Identifier","desc":"Identyfikuje proces biznesowy (Peppol wymaga konkretnej warto≈õci).","support":"both"},
  {"level":1,"id":"profileexecutionid","parent":"invoice","card":"0..1","name":"cbc:ProfileExecutionID","datatype":"Identifier","desc":"Identyfikuje instancjƒô wykonania profilu.","support":"ubl"},
  {"level":1,"id":"id","parent":"invoice","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer faktury. Unikalny identyfikator wystawiony przez sprzedawcƒô.","support":"both"},
  {"level":1,"id":"copyindicator","parent":"invoice","card":"0..1","name":"cbc:CopyIndicator","datatype":"Boolean","desc":"Okre≈õla czy dokument jest kopiƒÖ (true) czy orygina≈Çem (false).","support":"ubl"},
  {"level":1,"id":"uuid","parent":"invoice","card":"0..1","name":"cbc:UUID","datatype":"Identifier","desc":"Uniwersalny unikalny identyfikator instancji dokumentu.","support":"ubl"},
  {"level":1,"id":"issuedate","parent":"invoice","card":"1..1","name":"cbc:IssueDate","datatype":"Date","desc":"Data wystawienia faktury. Format: YYYY-MM-DD","support":"both"},
  {"level":1,"id":"issuetime","parent":"invoice","card":"0..1","name":"cbc:IssueTime","datatype":"Text","desc":"Czas wystawienia dokumentu (format: HH:MM:SS).","support":"ubl"},
  {"level":1,"id":"duedate","parent":"invoice","card":"0..1","name":"cbc:DueDate","datatype":"Date","desc":"Termin p≈Çatno≈õci faktury.","support":"both"},
  {"level":1,"id":"invoicetypecode","parent":"invoice","card":"1..1","name":"cbc:InvoiceTypeCode","datatype":"Code","desc":"Kod typu faktury (380=faktura, 381=nota korygujƒÖca, 384=faktura korygujƒÖca).","support":"both"},
  {"level":1,"id":"note","parent":"invoice","card":"0..n","name":"cbc:Note","datatype":"Text","desc":"Uwagi tekstowe dotyczƒÖce faktury.","support":"both"},
  {"level":1,"id":"taxpointdate","parent":"invoice","card":"0..1","name":"cbc:TaxPointDate","datatype":"Date","desc":"Data powstania obowiƒÖzku podatkowego VAT.","support":"both"},
  {"level":1,"id":"documentcurrencycode","parent":"invoice","card":"1..1","name":"cbc:DocumentCurrencyCode","datatype":"Code","desc":"Waluta faktury (ISO 4217: EUR, USD, GBP, PLN, etc.).","support":"both"},
  {"level":1,"id":"taxcurrencycode","parent":"invoice","card":"0..1","name":"cbc:TaxCurrencyCode","datatype":"Code","desc":"Waluta dla kwot podatku.","support":"both"},
  {"level":1,"id":"pricingcurrencycode","parent":"invoice","card":"0..1","name":"cbc:PricingCurrencyCode","datatype":"Code","desc":"Waluta u≈ºywana dla cen.","support":"ubl"},
  {"level":1,"id":"paymentcurrencycode","parent":"invoice","card":"0..1","name":"cbc:PaymentCurrencyCode","datatype":"Code","desc":"Waluta p≈Çatno≈õci.","support":"ubl"},
  {"level":1,"id":"paymentalternativecurrencycode","parent":"invoice","card":"0..1","name":"cbc:PaymentAlternativeCurrencyCode","datatype":"Code","desc":"Alternatywna waluta p≈Çatno≈õci.","support":"ubl"},
  {"level":1,"id":"accountingcostcode","parent":"invoice","card":"0..1","name":"cbc:AccountingCostCode","datatype":"Code","desc":"Kod ksiƒôgowy nabywcy (jako kod).","support":"ubl"},
  {"level":1,"id":"accountingcost","parent":"invoice","card":"0..1","name":"cbc:AccountingCost","datatype":"Text","desc":"Kod ksiƒôgowy lub referencja projektowa nabywcy.","support":"both"},
  {"level":1,"id":"linecountnumeric","parent":"invoice","card":"0..1","name":"cbc:LineCountNumeric","datatype":"Quantity","desc":"Liczba linii faktury w dokumencie.","support":"ubl"},
  {"level":1,"id":"buyerreference","parent":"invoice","card":"0..1","name":"cbc:BuyerReference","datatype":"Text","desc":"Referencja nabywcy do routingu wewnƒôtrznego.","support":"both"},

  {"level":1,"id":"invoiceperiod","parent":"invoice","card":"0..n","name":"cac:InvoicePeriod","datatype":"DocRef","desc":"Okres rozliczeniowy faktury.","support":"both","hasChildren":true},
  {"level":2,"id":"invoiceperiod-startdate","parent":"invoiceperiod","card":"0..1","name":"cbc:StartDate","datatype":"Date","desc":"Data poczƒÖtkowa okresu rozliczeniowego.","support":"both"},
  {"level":2,"id":"invoiceperiod-enddate","parent":"invoiceperiod","card":"0..1","name":"cbc:EndDate","datatype":"Date","desc":"Data ko≈Ñcowa okresu rozliczeniowego.","support":"both"},
  {"level":2,"id":"invoiceperiod-descriptioncode","parent":"invoiceperiod","card":"0..n","name":"cbc:DescriptionCode","datatype":"Code","desc":"Kod opisu okresu.","support":"both"},
  {"level":2,"id":"invoiceperiod-description","parent":"invoiceperiod","card":"0..n","name":"cbc:Description","datatype":"Text","desc":"Tekstowy opis okresu.","support":"ubl"},

  {"level":1,"id":"orderreference","parent":"invoice","card":"0..1","name":"cac:OrderReference","datatype":"DocRef","desc":"Referencja do zam√≥wienia zakupu.","support":"both","hasChildren":true},
  {"level":2,"id":"orderreference-id","parent":"orderreference","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer zam√≥wienia nadany przez nabywcƒô.","support":"both"},
  {"level":2,"id":"orderreference-salesorderid","parent":"orderreference","card":"0..1","name":"cbc:SalesOrderID","datatype":"Identifier","desc":"Numer zam√≥wienia sprzeda≈ºy nadany przez sprzedawcƒô.","support":"both"},
  {"level":2,"id":"orderreference-copyindicator","parent":"orderreference","card":"0..1","name":"cbc:CopyIndicator","datatype":"Boolean","desc":"Okre≈õla czy zam√≥wienie jest kopiƒÖ.","support":"ubl"},
  {"level":2,"id":"orderreference-uuid","parent":"orderreference","card":"0..1","name":"cbc:UUID","datatype":"Identifier","desc":"UUID referencyjnego zam√≥wienia.","support":"ubl"},
  {"level":2,"id":"orderreference-issuedate","parent":"orderreference","card":"0..1","name":"cbc:IssueDate","datatype":"Date","desc":"Data wystawienia zam√≥wienia.","support":"ubl"},

  {"level":1,"id":"billingreference","parent":"invoice","card":"0..n","name":"cac:BillingReference","datatype":"DocRef","desc":"Referencja do poprzednich dokument√≥w rozliczeniowych.","support":"both","hasChildren":true},
  {"level":2,"id":"billingreference-invoicedocref","parent":"billingreference","card":"1..1","name":"cac:InvoiceDocumentReference","datatype":"DocRef","desc":"Referencja do poprzedniej faktury.","support":"both","hasChildren":true},
  {"level":3,"id":"billingreference-invoicedocref-id","parent":"billingreference-invoicedocref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer poprzedniej faktury.","support":"both"},
  {"level":3,"id":"billingreference-invoicedocref-issuedate","parent":"billingreference-invoicedocref","card":"0..1","name":"cbc:IssueDate","datatype":"Date","desc":"Data wystawienia poprzedniej faktury.","support":"both"},
  {"level":2,"id":"billingreference-creditnoteref","parent":"billingreference","card":"0..1","name":"cac:CreditNoteDocumentReference","datatype":"DocRef","desc":"Referencja do poprzedniej noty kredytowej.","support":"ubl","hasChildren":true},
  {"level":3,"id":"billingreference-creditnoteref-id","parent":"billingreference-creditnoteref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer poprzedniej noty kredytowej.","support":"ubl"},

  {"level":1,"id":"despatchdocref","parent":"invoice","card":"0..n","name":"cac:DespatchDocumentReference","datatype":"DocRef","desc":"Referencja do awiza wysy≈Çkowego.","support":"both","hasChildren":true},
  {"level":2,"id":"despatchdocref-id","parent":"despatchdocref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer awiza wysy≈Çkowego.","support":"both"},

  {"level":1,"id":"receiptdocref","parent":"invoice","card":"0..n","name":"cac:ReceiptDocumentReference","datatype":"DocRef","desc":"Referencja do potwierdzenia odbioru.","support":"both","hasChildren":true},
  {"level":2,"id":"receiptdocref-id","parent":"receiptdocref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer potwierdzenia odbioru.","support":"both"},

  {"level":1,"id":"originatordocref","parent":"invoice","card":"0..n","name":"cac:OriginatorDocumentReference","datatype":"DocRef","desc":"Referencja do dokumentu ≈∫r√≥d≈Çowego.","support":"both","hasChildren":true},
  {"level":2,"id":"originatordocref-id","parent":"originatordocref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Identyfikator dokumentu ≈∫r√≥d≈Çowego.","support":"both"},

  {"level":1,"id":"contractdocref","parent":"invoice","card":"0..n","name":"cac:ContractDocumentReference","datatype":"DocRef","desc":"Referencja do umowy.","support":"both","hasChildren":true},
  {"level":2,"id":"contractdocref-id","parent":"contractdocref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer umowy.","support":"both"},

  {"level":1,"id":"additionaldocref","parent":"invoice","card":"0..n","name":"cac:AdditionalDocumentReference","datatype":"DocRef","desc":"Referencja do dodatkowych dokument√≥w wspierajƒÖcych.","support":"both","hasChildren":true},
  {"level":2,"id":"additionaldocref-id","parent":"additionaldocref","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Identyfikator dokumentu.","support":"both"},
  {"level":2,"id":"additionaldocref-doctype","parent":"additionaldocref","card":"0..1","name":"cbc:DocumentTypeCode","datatype":"Code","desc":"Kod typu dokumentu.","support":"both"},
  {"level":2,"id":"additionaldocref-docdesc","parent":"additionaldocref","card":"0..1","name":"cbc:DocumentDescription","datatype":"Text","desc":"Opis dokumentu.","support":"both"},
  {"level":2,"id":"additionaldocref-attachment","parent":"additionaldocref","card":"0..1","name":"cac:Attachment","datatype":"DocRef","desc":"Za≈ÇƒÖczony dokument.","support":"both","hasChildren":true},
  {"level":3,"id":"additionaldocref-attachment-binary","parent":"additionaldocref-attachment","card":"0..1","name":"cbc:EmbeddedDocumentBinaryObject","datatype":"Binary","desc":"Dokument binarny (kodowanie Base64).","support":"both"},
  {"level":3,"id":"additionaldocref-attachment-external","parent":"additionaldocref-attachment","card":"0..1","name":"cac:ExternalReference","datatype":"DocRef","desc":"Zewnƒôtrzna referencja do dokumentu.","support":"both","hasChildren":true},
  {"level":4,"id":"additionaldocref-attachment-external-uri","parent":"additionaldocref-attachment-external","card":"1..1","name":"cbc:URI","datatype":"Text","desc":"URI zewnƒôtrznego dokumentu.","support":"both"},

  {"level":1,"id":"projectreference","parent":"invoice","card":"0..n","name":"cac:ProjectReference","datatype":"DocRef","desc":"Informacje o projekcie.","support":"both","hasChildren":true},
  {"level":2,"id":"projectreference-id","parent":"projectreference","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Identyfikator projektu.","support":"both"},

  {"level":1,"id":"accountingsupplierparty","parent":"invoice","card":"1..1","name":"cac:AccountingSupplierParty","datatype":"DocRef","desc":"Strona dostawcy (sprzedawcy).","support":"both","hasChildren":true},
  {"level":2,"id":"accountingsupplierparty-party","parent":"accountingsupplierparty","card":"1..1","name":"cac:Party","datatype":"DocRef","desc":"Informacje o stronie dostawcy.","support":"both","hasChildren":true},
  {"level":3,"id":"supplier-endpointid","parent":"accountingsupplierparty-party","card":"1..1","name":"cbc:EndpointID","datatype":"Identifier","desc":"Adres elektroniczny (np. GLN dla Peppol).","support":"both"},
  {"level":3,"id":"supplier-partyidentification","parent":"accountingsupplierparty-party","card":"0..n","name":"cac:PartyIdentification","datatype":"DocRef","desc":"Identyfikatory strony (np. VAT, rejestr firmy).","support":"both","hasChildren":true},
  {"level":4,"id":"supplier-partyidentification-id","parent":"supplier-partyidentification","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Warto≈õƒá identyfikatora.","support":"both"},
  {"level":3,"id":"supplier-partyname","parent":"accountingsupplierparty-party","card":"0..1","name":"cac:PartyName","datatype":"DocRef","desc":"Nazwa handlowa dostawcy.","support":"both","hasChildren":true},
  {"level":4,"id":"supplier-partyname-name","parent":"supplier-partyname","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa handlowa dostawcy.","support":"both"},
  {"level":3,"id":"supplier-postaladdress","parent":"accountingsupplierparty-party","card":"1..1","name":"cac:PostalAddress","datatype":"DocRef","desc":"Adres pocztowy dostawcy.","support":"both","hasChildren":true},
  {"level":4,"id":"supplier-postaladdress-streetname","parent":"supplier-postaladdress","card":"0..1","name":"cbc:StreetName","datatype":"Text","desc":"Nazwa ulicy.","support":"both"},
  {"level":4,"id":"supplier-postaladdress-additionalstreetname","parent":"supplier-postaladdress","card":"0..1","name":"cbc:AdditionalStreetName","datatype":"Text","desc":"Dodatkowa linia adresu.","support":"both"},
  {"level":4,"id":"supplier-postaladdress-cityname","parent":"supplier-postaladdress","card":"0..1","name":"cbc:CityName","datatype":"Text","desc":"Nazwa miasta.","support":"both"},
  {"level":4,"id":"supplier-postaladdress-postalzone","parent":"supplier-postaladdress","card":"0..1","name":"cbc:PostalZone","datatype":"Text","desc":"Kod pocztowy.","support":"both"},
  {"level":4,"id":"supplier-postaladdress-countrysubentity","parent":"supplier-postaladdress","card":"0..1","name":"cbc:CountrySubentity","datatype":"Text","desc":"Region, wojew√≥dztwo lub stan.","support":"both"},
  {"level":4,"id":"supplier-postaladdress-addressline","parent":"supplier-postaladdress","card":"0..1","name":"cac:AddressLine","datatype":"DocRef","desc":"Dodatkowa linia adresu.","support":"both","hasChildren":true},
  {"level":5,"id":"supplier-postaladdress-addressline-line","parent":"supplier-postaladdress-addressline","card":"1..1","name":"cbc:Line","datatype":"Text","desc":"Tekst linii adresu.","support":"both"},
  {"level":4,"id":"supplier-postaladdress-country","parent":"supplier-postaladdress","card":"1..1","name":"cac:Country","datatype":"DocRef","desc":"Informacje o kraju.","support":"both","hasChildren":true},
  {"level":5,"id":"supplier-postaladdress-country-code","parent":"supplier-postaladdress-country","card":"1..1","name":"cbc:IdentificationCode","datatype":"Code","desc":"Kod kraju (ISO 3166-1 alpha-2).","support":"both"},
  {"level":5,"id":"supplier-postaladdress-country-name","parent":"supplier-postaladdress-country","card":"0..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa kraju.","support":"ubl"},
  {"level":3,"id":"supplier-partytaxscheme","parent":"accountingsupplierparty-party","card":"0..2","name":"cac:PartyTaxScheme","datatype":"DocRef","desc":"Rejestracja podatkowa (numer VAT).","support":"both","hasChildren":true},
  {"level":4,"id":"supplier-partytaxscheme-companyid","parent":"supplier-partytaxscheme","card":"1..1","name":"cbc:CompanyID","datatype":"Identifier","desc":"Numer identyfikacji VAT.","support":"both"},
  {"level":4,"id":"supplier-partytaxscheme-taxscheme","parent":"supplier-partytaxscheme","card":"1..1","name":"cac:TaxScheme","datatype":"DocRef","desc":"Informacje o schemacie podatkowym.","support":"both","hasChildren":true},
  {"level":5,"id":"supplier-partytaxscheme-taxscheme-id","parent":"supplier-partytaxscheme-taxscheme","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"Typ podatku (np. VAT).","support":"both"},
  {"level":3,"id":"supplier-partylegalentity","parent":"accountingsupplierparty-party","card":"1..1","name":"cac:PartyLegalEntity","datatype":"DocRef","desc":"Informacje o osobie prawnej.","support":"both","hasChildren":true},
  {"level":4,"id":"supplier-partylegalentity-regname","parent":"supplier-partylegalentity","card":"1..1","name":"cbc:RegistrationName","datatype":"Text","desc":"Prawna zarejestrowana nazwa dostawcy.","support":"both"},
  {"level":4,"id":"supplier-partylegalentity-companyid","parent":"supplier-partylegalentity","card":"0..1","name":"cbc:CompanyID","datatype":"Identifier","desc":"Numer rejestracyjny firmy.","support":"both"},
  {"level":4,"id":"supplier-partylegalentity-companylegalform","parent":"supplier-partylegalentity","card":"0..1","name":"cbc:CompanyLegalForm","datatype":"Text","desc":"Forma prawna firmy.","support":"both"},
  {"level":3,"id":"supplier-contact","parent":"accountingsupplierparty-party","card":"0..1","name":"cac:Contact","datatype":"DocRef","desc":"Informacje kontaktowe.","support":"both","hasChildren":true},
  {"level":4,"id":"supplier-contact-name","parent":"supplier-contact","card":"0..1","name":"cbc:Name","datatype":"Text","desc":"Imiƒô i nazwisko osoby kontaktowej.","support":"both"},
  {"level":4,"id":"supplier-contact-telephone","parent":"supplier-contact","card":"0..1","name":"cbc:Telephone","datatype":"Text","desc":"Numer telefonu kontaktowego.","support":"both"},
  {"level":4,"id":"supplier-contact-email","parent":"supplier-contact","card":"0..1","name":"cbc:ElectronicMail","datatype":"Text","desc":"Adres email kontaktowy.","support":"both"},

  {"level":1,"id":"accountingcustomerparty","parent":"invoice","card":"1..1","name":"cac:AccountingCustomerParty","datatype":"DocRef","desc":"Strona klienta (nabywcy).","support":"both","hasChildren":true},
  {"level":2,"id":"accountingcustomerparty-party","parent":"accountingcustomerparty","card":"1..1","name":"cac:Party","datatype":"DocRef","desc":"Informacje o stronie klienta (analogiczna struktura jak supplier).","support":"both","hasChildren":true},
  {"level":3,"id":"customer-endpointid","parent":"accountingcustomerparty-party","card":"1..1","name":"cbc:EndpointID","datatype":"Identifier","desc":"Adres elektroniczny nabywcy.","support":"both"},
  {"level":3,"id":"customer-partyidentification","parent":"accountingcustomerparty-party","card":"0..1","name":"cac:PartyIdentification","datatype":"DocRef","desc":"Identyfikatory nabywcy.","support":"both","hasChildren":true},
  {"level":4,"id":"customer-partyidentification-id","parent":"customer-partyidentification","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Identyfikator nabywcy.","support":"both"},
  {"level":3,"id":"customer-partyname","parent":"accountingcustomerparty-party","card":"0..1","name":"cac:PartyName","datatype":"DocRef","desc":"Nazwa handlowa nabywcy.","support":"both","hasChildren":true},
  {"level":4,"id":"customer-partyname-name","parent":"customer-partyname","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa nabywcy.","support":"both"},
  {"level":3,"id":"customer-postaladdress","parent":"accountingcustomerparty-party","card":"1..1","name":"cac:PostalAddress","datatype":"DocRef","desc":"Adres pocztowy nabywcy (analogiczna struktura jak supplier).","support":"both","hasChildren":true},
  {"level":4,"id":"customer-postaladdress-country","parent":"customer-postaladdress","card":"1..1","name":"cac:Country","datatype":"DocRef","desc":"Kraj.","support":"both","hasChildren":true},
  {"level":5,"id":"customer-postaladdress-country-code","parent":"customer-postaladdress-country","card":"1..1","name":"cbc:IdentificationCode","datatype":"Code","desc":"Kod kraju.","support":"both"},
  {"level":3,"id":"customer-partytaxscheme","parent":"accountingcustomerparty-party","card":"0..1","name":"cac:PartyTaxScheme","datatype":"DocRef","desc":"Informacje VAT nabywcy.","support":"both","hasChildren":true},
  {"level":4,"id":"customer-partytaxscheme-companyid","parent":"customer-partytaxscheme","card":"1..1","name":"cbc:CompanyID","datatype":"Identifier","desc":"Numer VAT nabywcy.","support":"both"},
  {"level":4,"id":"customer-partytaxscheme-taxscheme","parent":"customer-partytaxscheme","card":"1..1","name":"cac:TaxScheme","datatype":"DocRef","desc":"Schemat podatkowy.","support":"both","hasChildren":true},
  {"level":5,"id":"customer-partytaxscheme-taxscheme-id","parent":"customer-partytaxscheme-taxscheme","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"Typ podatku.","support":"both"},
  {"level":3,"id":"customer-partylegalentity","parent":"accountingcustomerparty-party","card":"1..1","name":"cac:PartyLegalEntity","datatype":"DocRef","desc":"Osoba prawna nabywcy.","support":"both","hasChildren":true},
  {"level":4,"id":"customer-partylegalentity-regname","parent":"customer-partylegalentity","card":"1..1","name":"cbc:RegistrationName","datatype":"Text","desc":"Prawna nazwa nabywcy.","support":"both"},
  {"level":4,"id":"customer-partylegalentity-companyid","parent":"customer-partylegalentity","card":"0..1","name":"cbc:CompanyID","datatype":"Identifier","desc":"Numer rejestracyjny nabywcy.","support":"both"},
  {"level":3,"id":"customer-contact","parent":"accountingcustomerparty-party","card":"0..1","name":"cac:Contact","datatype":"DocRef","desc":"Kontakt nabywcy.","support":"both","hasChildren":true},
  {"level":4,"id":"customer-contact-name","parent":"customer-contact","card":"0..1","name":"cbc:Name","datatype":"Text","desc":"Osoba kontaktowa.","support":"both"},
  {"level":4,"id":"customer-contact-telephone","parent":"customer-contact","card":"0..1","name":"cbc:Telephone","datatype":"Text","desc":"Telefon kontaktowy.","support":"both"},
  {"level":4,"id":"customer-contact-email","parent":"customer-contact","card":"0..1","name":"cbc:ElectronicMail","datatype":"Text","desc":"Email kontaktowy.","support":"both"},
  
  {"level":1,"id":"payeeparty","parent":"invoice","card":"0..1","name":"cac:PayeeParty","datatype":"DocRef","desc":"Odbiorca p≈Çatno≈õci, je≈õli r√≥≈ºny od dostawcy.","support":"both","hasChildren":true},
  {"level":2,"id":"payeeparty-partyidentification","parent":"payeeparty","card":"0..1","name":"cac:PartyIdentification","datatype":"DocRef","desc":"Identyfikator odbiorcy p≈Çatno≈õci.","support":"both","hasChildren":true},
  {"level":3,"id":"payeeparty-partyidentification-id","parent":"payeeparty-partyidentification","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"ID odbiorcy p≈Çatno≈õci.","support":"both"},
  {"level":2,"id":"payeeparty-partyname","parent":"payeeparty","card":"1..1","name":"cac:PartyName","datatype":"DocRef","desc":"Nazwa odbiorcy p≈Çatno≈õci.","support":"both","hasChildren":true},
  {"level":3,"id":"payeeparty-partyname-name","parent":"payeeparty-partyname","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa odbiorcy p≈Çatno≈õci.","support":"both"},
  {"level":2,"id":"payeeparty-partylegalentity","parent":"payeeparty","card":"0..1","name":"cac:PartyLegalEntity","datatype":"DocRef","desc":"Informacje prawne odbiorcy.","support":"both","hasChildren":true},
  {"level":3,"id":"payeeparty-partylegalentity-companyid","parent":"payeeparty-partylegalentity","card":"1..1","name":"cbc:CompanyID","datatype":"Identifier","desc":"ID firmy odbiorcy p≈Çatno≈õci.","support":"both"},

  {"level":1,"id":"taxrepresentativeparty","parent":"invoice","card":"0..1","name":"cac:TaxRepresentativeParty","datatype":"DocRef","desc":"Strona reprezentanta podatkowego.","support":"both","hasChildren":true},
  {"level":2,"id":"taxrepresentativeparty-partyname","parent":"taxrepresentativeparty","card":"1..1","name":"cac:PartyName","datatype":"DocRef","desc":"Nazwa reprezentanta podatkowego.","support":"both","hasChildren":true},
  {"level":3,"id":"taxrepresentativeparty-partyname-name","parent":"taxrepresentativeparty-partyname","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa.","support":"both"},
  {"level":2,"id":"taxrepresentativeparty-postaladdress","parent":"taxrepresentativeparty","card":"1..1","name":"cac:PostalAddress","datatype":"DocRef","desc":"Adres.","support":"both","hasChildren":true},
  {"level":3,"id":"taxrepresentativeparty-postaladdress-country","parent":"taxrepresentativeparty-postaladdress","card":"1..1","name":"cac:Country","datatype":"DocRef","desc":"Kraj.","support":"both","hasChildren":true},
  {"level":4,"id":"taxrepresentativeparty-postaladdress-country-code","parent":"taxrepresentativeparty-postaladdress-country","card":"1..1","name":"cbc:IdentificationCode","datatype":"Code","desc":"Kod kraju.","support":"both"},
  {"level":2,"id":"taxrepresentativeparty-partytaxscheme","parent":"taxrepresentativeparty","card":"1..1","name":"cac:PartyTaxScheme","datatype":"DocRef","desc":"Informacje podatkowe.","support":"both","hasChildren":true},
  {"level":3,"id":"taxrepresentativeparty-partytaxscheme-companyid","parent":"taxrepresentativeparty-partytaxscheme","card":"1..1","name":"cbc:CompanyID","datatype":"Identifier","desc":"Numer VAT.","support":"both"},
  {"level":3,"id":"taxrepresentativeparty-partytaxscheme-taxscheme","parent":"taxrepresentativeparty-partytaxscheme","card":"1..1","name":"cac:TaxScheme","datatype":"DocRef","desc":"Schemat podatkowy.","support":"both","hasChildren":true},
  {"level":4,"id":"taxrepresentativeparty-partytaxscheme-taxscheme-id","parent":"taxrepresentativeparty-partytaxscheme-taxscheme","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"Typ podatku.","support":"both"},

  {"level":1,"id":"delivery","parent":"invoice","card":"0..n","name":"cac:Delivery","datatype":"DocRef","desc":"Informacje o dostawie.","support":"both","hasChildren":true},
  {"level":2,"id":"delivery-actualdeliverydate","parent":"delivery","card":"0..1","name":"cbc:ActualDeliveryDate","datatype":"Date","desc":"Rzeczywista data dostawy.","support":"both"},
  {"level":2,"id":"delivery-deliverylocation","parent":"delivery","card":"0..1","name":"cac:DeliveryLocation","datatype":"DocRef","desc":"Miejsce dostawy.","support":"both","hasChildren":true},
  {"level":3,"id":"delivery-deliverylocation-id","parent":"delivery-deliverylocation","card":"0..1","name":"cbc:ID","datatype":"Identifier","desc":"Identyfikator lokalizacji.","support":"both"},
  {"level":3,"id":"delivery-deliverylocation-address","parent":"delivery-deliverylocation","card":"0..1","name":"cac:Address","datatype":"DocRef","desc":"Adres dostawy.","support":"both","hasChildren":true},
  {"level":4,"id":"delivery-deliverylocation-address-country","parent":"delivery-deliverylocation-address","card":"1..1","name":"cac:Country","datatype":"DocRef","desc":"Kraj.","support":"both","hasChildren":true},
  {"level":5,"id":"delivery-deliverylocation-address-country-code","parent":"delivery-deliverylocation-address-country","card":"1..1","name":"cbc:IdentificationCode","datatype":"Code","desc":"Kod kraju.","support":"both"},
  {"level":2,"id":"delivery-deliveryparty","parent":"delivery","card":"0..1","name":"cac:DeliveryParty","datatype":"DocRef","desc":"Strona dostarczajƒÖca.","support":"both","hasChildren":true},
  {"level":3,"id":"delivery-deliveryparty-partyname","parent":"delivery-deliveryparty","card":"1..1","name":"cac:PartyName","datatype":"DocRef","desc":"Nazwa strony.","support":"both","hasChildren":true},
  {"level":4,"id":"delivery-deliveryparty-partyname-name","parent":"delivery-deliveryparty-partyname","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa.","support":"both"},

  {"level":1,"id":"paymentmeans","parent":"invoice","card":"0..n","name":"cac:PaymentMeans","datatype":"DocRef","desc":"Informacje o metodzie p≈Çatno≈õci.","support":"both","hasChildren":true},
  {"level":2,"id":"paymentmeans-code","parent":"paymentmeans","card":"1..1","name":"cbc:PaymentMeansCode","datatype":"Code","desc":"Kod metody p≈Çatno≈õci (30=Przelew, 48=Karta, 49=Polecenie zap≈Çaty, etc.).","support":"both"},
  {"level":2,"id":"paymentmeans-id","parent":"paymentmeans","card":"0..1","name":"cbc:PaymentID","datatype":"Identifier","desc":"Referencja p≈Çatno≈õci / informacje o przelewie.","support":"both"},
  {"level":2,"id":"paymentmeans-cardaccount","parent":"paymentmeans","card":"0..1","name":"cac:CardAccount","datatype":"DocRef","desc":"Szczeg√≥≈Çy p≈Çatno≈õci kartƒÖ.","support":"both","hasChildren":true},
  {"level":3,"id":"paymentmeans-cardaccount-number","parent":"paymentmeans-cardaccount","card":"1..1","name":"cbc:PrimaryAccountNumberID","datatype":"Identifier","desc":"Numer karty (zamaskowany).","support":"both"},
  {"level":3,"id":"paymentmeans-cardaccount-networkid","parent":"paymentmeans-cardaccount","card":"1..1","name":"cbc:NetworkID","datatype":"Code","desc":"Sieƒá kart (VISA, Mastercard, etc.).","support":"both"},
  {"level":3,"id":"paymentmeans-cardaccount-holdername","parent":"paymentmeans-cardaccount","card":"0..1","name":"cbc:HolderName","datatype":"Text","desc":"Nazwa posiadacza karty.","support":"both"},
  {"level":2,"id":"paymentmeans-payeefinancialaccount","parent":"paymentmeans","card":"0..1","name":"cac:PayeeFinancialAccount","datatype":"DocRef","desc":"Konto bankowe do otrzymania p≈Çatno≈õci.","support":"both","hasChildren":true},
  {"level":3,"id":"paymentmeans-payeefinancialaccount-id","parent":"paymentmeans-payeefinancialaccount","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"IBAN lub numer konta.","support":"both"},
  {"level":3,"id":"paymentmeans-payeefinancialaccount-name","parent":"paymentmeans-payeefinancialaccount","card":"0..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa posiadacza konta.","support":"both"},
  {"level":3,"id":"paymentmeans-payeefinancialaccount-financialinstitution","parent":"paymentmeans-payeefinancialaccount","card":"0..1","name":"cac:FinancialInstitutionBranch","datatype":"DocRef","desc":"Informacje o banku.","support":"both","hasChildren":true},
  {"level":4,"id":"paymentmeans-payeefinancialaccount-financialinstitution-id","parent":"paymentmeans-payeefinancialaccount-financialinstitution","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Kod BIC/SWIFT.","support":"both"},
  {"level":2,"id":"paymentmeans-paymentmandate","parent":"paymentmeans","card":"0..1","name":"cac:PaymentMandate","datatype":"DocRef","desc":"Upowa≈ºnienie do polecenia zap≈Çaty.","support":"both","hasChildren":true},
  {"level":3,"id":"paymentmeans-paymentmandate-id","parent":"paymentmeans-paymentmandate","card":"0..1","name":"cbc:ID","datatype":"Identifier","desc":"Referencja upowa≈ºnienia.","support":"both"},
  {"level":3,"id":"paymentmeans-paymentmandate-payerfinancialaccount","parent":"paymentmeans-paymentmandate","card":"0..1","name":"cac:PayerFinancialAccount","datatype":"DocRef","desc":"Konto d≈Çu≈ºnika.","support":"both","hasChildren":true},
  {"level":4,"id":"paymentmeans-paymentmandate-payerfinancialaccount-id","parent":"paymentmeans-paymentmandate-payerfinancialaccount","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"ID konta d≈Çu≈ºnika.","support":"both"},

  {"level":1,"id":"paymentterms","parent":"invoice","card":"0..n","name":"cac:PaymentTerms","datatype":"DocRef","desc":"Warunki p≈Çatno≈õci.","support":"both","hasChildren":true},
  {"level":2,"id":"paymentterms-note","parent":"paymentterms","card":"1..1","name":"cbc:Note","datatype":"Text","desc":"Opis warunk√≥w p≈Çatno≈õci.","support":"both"},

  {"level":1,"id":"allowancecharge","parent":"invoice","card":"0..n","name":"cac:AllowanceCharge","datatype":"DocRef","desc":"Rabaty i op≈Çaty na poziomie dokumentu.","support":"both","hasChildren":true},
  {"level":2,"id":"allowancecharge-chargeindicator","parent":"allowancecharge","card":"1..1","name":"cbc:ChargeIndicator","datatype":"Boolean","desc":"True=op≈Çata, False=rabat.","support":"both"},
  {"level":2,"id":"allowancecharge-reasoncode","parent":"allowancecharge","card":"0..1","name":"cbc:AllowanceChargeReasonCode","datatype":"Code","desc":"Kod przyczyny.","support":"both"},
  {"level":2,"id":"allowancecharge-reason","parent":"allowancecharge","card":"0..1","name":"cbc:AllowanceChargeReason","datatype":"Text","desc":"Tekstowy opis przyczyny.","support":"both"},
  {"level":2,"id":"allowancecharge-multiplier","parent":"allowancecharge","card":"0..1","name":"cbc:MultiplierFactorNumeric","datatype":"Percent","desc":"Warto≈õƒá procentowa (jako decimal, np. 0.2 = 20%).","support":"both"},
  {"level":2,"id":"allowancecharge-amount","parent":"allowancecharge","card":"1..1","name":"cbc:Amount","datatype":"Amount","desc":"Kwota rabatu/op≈Çaty.","support":"both"},
  {"level":2,"id":"allowancecharge-baseamount","parent":"allowancecharge","card":"0..1","name":"cbc:BaseAmount","datatype":"Amount","desc":"Kwota bazowa dla obliczenia procentowego.","support":"both"},
  {"level":2,"id":"allowancecharge-taxcategory","parent":"allowancecharge","card":"1..1","name":"cac:TaxCategory","datatype":"DocRef","desc":"Kategoria VAT dla rabatu/op≈Çaty.","support":"both","hasChildren":true},
  {"level":3,"id":"allowancecharge-taxcategory-id","parent":"allowancecharge-taxcategory","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"Kod kategorii VAT (S, Z, E, etc.).","support":"both"},
  {"level":3,"id":"allowancecharge-taxcategory-percent","parent":"allowancecharge-taxcategory","card":"0..1","name":"cbc:Percent","datatype":"Percent","desc":"Stawka VAT.","support":"both"},
  {"level":3,"id":"allowancecharge-taxcategory-taxscheme","parent":"allowancecharge-taxcategory","card":"1..1","name":"cac:TaxScheme","datatype":"DocRef","desc":"Schemat podatkowy.","support":"both","hasChildren":true},
  {"level":4,"id":"allowancecharge-taxcategory-taxscheme-id","parent":"allowancecharge-taxcategory-taxscheme","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"VAT.","support":"both"},

  {"level":1,"id":"taxtotal","parent":"invoice","card":"1..2","name":"cac:TaxTotal","datatype":"DocRef","desc":"Sumy VAT wg typu. 1 dla waluty dokumentu, opcjonalnie 2 dla waluty podatkowej.","support":"both","hasChildren":true},
  {"level":2,"id":"taxtotal-amount","parent":"taxtotal","card":"1..1","name":"cbc:TaxAmount","datatype":"Amount","desc":"Ca≈Çkowita kwota VAT.","support":"both"},
  {"level":2,"id":"taxtotal-subtotal","parent":"taxtotal","card":"0..n","name":"cac:TaxSubtotal","datatype":"DocRef","desc":"Podzia≈Ç VAT wed≈Çug kategorii/stawki.","support":"both","hasChildren":true},
  {"level":3,"id":"taxtotal-subtotal-taxableamount","parent":"taxtotal-subtotal","card":"1..1","name":"cbc:TaxableAmount","datatype":"Amount","desc":"Kwota netto podlegajƒÖca opodatkowaniu.","support":"both"},
  {"level":3,"id":"taxtotal-subtotal-taxamount","parent":"taxtotal-subtotal","card":"1..1","name":"cbc:TaxAmount","datatype":"Amount","desc":"Kwota VAT dla tej kategorii.","support":"both"},
  {"level":3,"id":"taxtotal-subtotal-taxcategory","parent":"taxtotal-subtotal","card":"1..1","name":"cac:TaxCategory","datatype":"DocRef","desc":"Kategoria VAT.","support":"both","hasChildren":true},
  {"level":4,"id":"taxtotal-subtotal-taxcategory-id","parent":"taxtotal-subtotal-taxcategory","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"Kod kategorii VAT (S=Standard, Z=Zero, E=Exempt, K=IntraCommunity, etc.).","support":"both"},
  {"level":4,"id":"taxtotal-subtotal-taxcategory-percent","parent":"taxtotal-subtotal-taxcategory","card":"0..1","name":"cbc:Percent","datatype":"Percent","desc":"Stawka VAT w procentach.","support":"both"},
  {"level":4,"id":"taxtotal-subtotal-taxcategory-exemptionreasoncode","parent":"taxtotal-subtotal-taxcategory","card":"0..1","name":"cbc:TaxExemptionReasonCode","datatype":"Code","desc":"Kod przyczyny zwolnienia.","support":"both"},
  {"level":4,"id":"taxtotal-subtotal-taxcategory-exemptionreason","parent":"taxtotal-subtotal-taxcategory","card":"0..1","name":"cbc:TaxExemptionReason","datatype":"Text","desc":"Tekstowy opis przyczyny zwolnienia.","support":"both"},
  {"level":4,"id":"taxtotal-subtotal-taxcategory-taxscheme","parent":"taxtotal-subtotal-taxcategory","card":"1..1","name":"cac:TaxScheme","datatype":"DocRef","desc":"Schemat podatkowy.","support":"both","hasChildren":true},
  {"level":5,"id":"taxtotal-subtotal-taxcategory-taxscheme-id","parent":"taxtotal-subtotal-taxcategory-taxscheme","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"VAT.","support":"both"},

  {"level":1,"id":"legalmonetarytotal","parent":"invoice","card":"1..1","name":"cac:LegalMonetaryTotal","datatype":"DocRef","desc":"Sumy kwotowe dokumentu.","support":"both","hasChildren":true},
  {"level":2,"id":"legalmonetarytotal-lineextension","parent":"legalmonetarytotal","card":"1..1","name":"cbc:LineExtensionAmount","datatype":"Amount","desc":"Suma kwot netto linii (bez VAT).","support":"both"},
  {"level":2,"id":"legalmonetarytotal-taxexclusive","parent":"legalmonetarytotal","card":"1..1","name":"cbc:TaxExclusiveAmount","datatype":"Amount","desc":"Suma netto (po rabatach/op≈Çatach dokumentowych, przed VAT).","support":"both"},
  {"level":2,"id":"legalmonetarytotal-taxinclusive","parent":"legalmonetarytotal","card":"1..1","name":"cbc:TaxInclusiveAmount","datatype":"Amount","desc":"Suma brutto (z VAT).","support":"both"},
  {"level":2,"id":"legalmonetarytotal-allowancetotal","parent":"legalmonetarytotal","card":"0..1","name":"cbc:AllowanceTotalAmount","datatype":"Amount","desc":"Suma rabat√≥w dokumentowych.","support":"both"},
  {"level":2,"id":"legalmonetarytotal-chargetotal","parent":"legalmonetarytotal","card":"0..1","name":"cbc:ChargeTotalAmount","datatype":"Amount","desc":"Suma op≈Çat dokumentowych.","support":"both"},
  {"level":2,"id":"legalmonetarytotal-prepaidamount","parent":"legalmonetarytotal","card":"0..1","name":"cbc:PrepaidAmount","datatype":"Amount","desc":"Kwota przedp≈Çaty.","support":"both"},
  {"level":2,"id":"legalmonetarytotal-payablerounding","parent":"legalmonetarytotal","card":"0..1","name":"cbc:PayableRoundingAmount","datatype":"Amount","desc":"Kwota zaokrƒÖglenia.","support":"both"},
  {"level":2,"id":"legalmonetarytotal-payableamount","parent":"legalmonetarytotal","card":"1..1","name":"cbc:PayableAmount","datatype":"Amount","desc":"Kwota do zap≈Çaty.","support":"both"},

  {"level":1,"id":"invoiceline","parent":"invoice","card":"1..n","name":"cac:InvoiceLine","datatype":"DocRef","desc":"Linie pozycji faktury.","support":"both","hasChildren":true},
  {"level":2,"id":"invoiceline-id","parent":"invoiceline","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer linii.","support":"both"},
  {"level":2,"id":"invoiceline-note","parent":"invoiceline","card":"0..1","name":"cbc:Note","datatype":"Text","desc":"Uwaga do linii.","support":"both"},
  {"level":2,"id":"invoiceline-invoicedquantity","parent":"invoiceline","card":"1..1","name":"cbc:InvoicedQuantity","datatype":"Quantity","desc":"Ilo≈õƒá fakturowana (z kodem jednostki).","support":"both"},
  {"level":2,"id":"invoiceline-lineextensionamount","parent":"invoiceline","card":"1..1","name":"cbc:LineExtensionAmount","datatype":"Amount","desc":"Kwota netto linii (bez VAT).","support":"both"},
  {"level":2,"id":"invoiceline-accountingcost","parent":"invoiceline","card":"0..1","name":"cbc:AccountingCost","datatype":"Text","desc":"Referencja ksiƒôgowa dla tej linii.","support":"both"},
  {"level":2,"id":"invoiceline-invoiceperiod","parent":"invoiceline","card":"0..1","name":"cac:InvoicePeriod","datatype":"DocRef","desc":"Okres dla tej linii.","support":"both","hasChildren":true},
  {"level":3,"id":"invoiceline-invoiceperiod-startdate","parent":"invoiceline-invoiceperiod","card":"0..1","name":"cbc:StartDate","datatype":"Date","desc":"Data poczƒÖtkowa.","support":"both"},
  {"level":3,"id":"invoiceline-invoiceperiod-enddate","parent":"invoiceline-invoiceperiod","card":"0..1","name":"cbc:EndDate","datatype":"Date","desc":"Data ko≈Ñcowa.","support":"both"},
  {"level":2,"id":"invoiceline-orderlinereference","parent":"invoiceline","card":"0..1","name":"cac:OrderLineReference","datatype":"DocRef","desc":"Referencja do linii zam√≥wienia.","support":"both","hasChildren":true},
  {"level":3,"id":"invoiceline-orderlinereference-lineid","parent":"invoiceline-orderlinereference","card":"1..1","name":"cbc:LineID","datatype":"Identifier","desc":"Numer linii zam√≥wienia.","support":"both"},
  {"level":2,"id":"invoiceline-documentreference","parent":"invoiceline","card":"0..1","name":"cac:DocumentReference","datatype":"DocRef","desc":"Referencja dokumentu dla linii.","support":"both","hasChildren":true},
  {"level":3,"id":"invoiceline-documentreference-id","parent":"invoiceline-documentreference","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"ID dokumentu.","support":"both"},
  {"level":3,"id":"invoiceline-documentreference-doctype","parent":"invoiceline-documentreference","card":"1..1","name":"cbc:DocumentTypeCode","datatype":"Code","desc":"Kod typu dokumentu (130=Referencja obiektu faktury).","support":"both"},
  {"level":2,"id":"invoiceline-allowancecharge","parent":"invoiceline","card":"0..n","name":"cac:AllowanceCharge","datatype":"DocRef","desc":"Rabaty/op≈Çaty na poziomie linii.","support":"both","hasChildren":true},
  {"level":3,"id":"invoiceline-allowancecharge-chargeindicator","parent":"invoiceline-allowancecharge","card":"1..1","name":"cbc:ChargeIndicator","datatype":"Boolean","desc":"True=op≈Çata, False=rabat.","support":"both"},
  {"level":3,"id":"invoiceline-allowancecharge-amount","parent":"invoiceline-allowancecharge","card":"1..1","name":"cbc:Amount","datatype":"Amount","desc":"Kwota.","support":"both"},
  {"level":2,"id":"invoiceline-item","parent":"invoiceline","card":"1..1","name":"cac:Item","datatype":"DocRef","desc":"Informacje o produkcie/us≈Çudze.","support":"both","hasChildren":true},
  {"level":3,"id":"invoiceline-item-description","parent":"invoiceline-item","card":"0..1","name":"cbc:Description","datatype":"Text","desc":"Opis pozycji.","support":"both"},
  {"level":3,"id":"invoiceline-item-name","parent":"invoiceline-item","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa pozycji.","support":"both"},
  {"level":3,"id":"invoiceline-item-buyersitemid","parent":"invoiceline-item","card":"0..1","name":"cac:BuyersItemIdentification","datatype":"DocRef","desc":"ID pozycji nabywcy.","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-buyersitemid-id","parent":"invoiceline-item-buyersitemid","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer pozycji nabywcy.","support":"both"},
  {"level":3,"id":"invoiceline-item-sellersitemid","parent":"invoiceline-item","card":"0..1","name":"cac:SellersItemIdentification","datatype":"DocRef","desc":"ID pozycji sprzedawcy.","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-sellersitemid-id","parent":"invoiceline-item-sellersitemid","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Numer pozycji sprzedawcy.","support":"both"},
  {"level":3,"id":"invoiceline-item-standarditemid","parent":"invoiceline-item","card":"0..1","name":"cac:StandardItemIdentification","datatype":"DocRef","desc":"Standardowy ID pozycji (GTIN, etc.).","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-standarditemid-id","parent":"invoiceline-item-standarditemid","card":"1..1","name":"cbc:ID","datatype":"Identifier","desc":"Standardowy identyfikator (z atrybutem schemeID).","support":"both"},
  {"level":3,"id":"invoiceline-item-origincountry","parent":"invoiceline-item","card":"0..1","name":"cac:OriginCountry","datatype":"DocRef","desc":"Kraj pochodzenia.","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-origincountry-code","parent":"invoiceline-item-origincountry","card":"1..1","name":"cbc:IdentificationCode","datatype":"Code","desc":"Kod kraju.","support":"both"},
  {"level":3,"id":"invoiceline-item-commodityclassification","parent":"invoiceline-item","card":"0..n","name":"cac:CommodityClassification","datatype":"DocRef","desc":"Klasyfikacja pozycji.","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-commodityclassification-code","parent":"invoiceline-item-commodityclassification","card":"1..1","name":"cbc:ItemClassificationCode","datatype":"Code","desc":"Kod klasyfikacji (CPV, UNSPSC, etc.).","support":"both"},
  {"level":3,"id":"invoiceline-item-classifiedtaxcategory","parent":"invoiceline-item","card":"1..1","name":"cac:ClassifiedTaxCategory","datatype":"DocRef","desc":"Kategoria VAT dla pozycji.","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-classifiedtaxcategory-id","parent":"invoiceline-item-classifiedtaxcategory","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"Kod kategorii VAT.","support":"both"},
  {"level":4,"id":"invoiceline-item-classifiedtaxcategory-percent","parent":"invoiceline-item-classifiedtaxcategory","card":"0..1","name":"cbc:Percent","datatype":"Percent","desc":"Stawka VAT.","support":"both"},
  {"level":4,"id":"invoiceline-item-classifiedtaxcategory-taxscheme","parent":"invoiceline-item-classifiedtaxcategory","card":"1..1","name":"cac:TaxScheme","datatype":"DocRef","desc":"Schemat podatkowy.","support":"both","hasChildren":true},
  {"level":5,"id":"invoiceline-item-classifiedtaxcategory-taxscheme-id","parent":"invoiceline-item-classifiedtaxcategory-taxscheme","card":"1..1","name":"cbc:ID","datatype":"Code","desc":"VAT.","support":"both"},
  {"level":3,"id":"invoiceline-item-additionalitemproperty","parent":"invoiceline-item","card":"0..n","name":"cac:AdditionalItemProperty","datatype":"DocRef","desc":"Dodatkowe atrybuty pozycji.","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-item-additionalitemproperty-name","parent":"invoiceline-item-additionalitemproperty","card":"1..1","name":"cbc:Name","datatype":"Text","desc":"Nazwa atrybutu.","support":"both"},
  {"level":4,"id":"invoiceline-item-additionalitemproperty-value","parent":"invoiceline-item-additionalitemproperty","card":"1..1","name":"cbc:Value","datatype":"Text","desc":"Warto≈õƒá atrybutu.","support":"both"},
  {"level":2,"id":"invoiceline-price","parent":"invoiceline","card":"1..1","name":"cac:Price","datatype":"DocRef","desc":"Cena pozycji.","support":"both","hasChildren":true},
  {"level":3,"id":"invoiceline-price-priceamount","parent":"invoiceline-price","card":"1..1","name":"cbc:PriceAmount","datatype":"UnitPrice","desc":"Cena jednostkowa netto. MUSI BYƒÜ ‚â• 0!","support":"both"},
  {"level":3,"id":"invoiceline-price-basequantity","parent":"invoiceline-price","card":"0..1","name":"cbc:BaseQuantity","datatype":"Quantity","desc":"Ilo≈õƒá bazowa dla ceny (np. cena za 100 szt).","support":"both"},
  {"level":3,"id":"invoiceline-price-allowancecharge","parent":"invoiceline-price","card":"0..1","name":"cac:AllowanceCharge","datatype":"DocRef","desc":"Rabat cenowy (brutto do netto).","support":"both","hasChildren":true},
  {"level":4,"id":"invoiceline-price-allowancecharge-chargeindicator","parent":"invoiceline-price-allowancecharge","card":"1..1","name":"cbc:ChargeIndicator","datatype":"Boolean","desc":"Zawsze: false (zawsze rabat na poziomie ceny).","support":"both"},
  {"level":4,"id":"invoiceline-price-allowancecharge-amount","parent":"invoiceline-price-allowancecharge","card":"1..1","name":"cbc:Amount","datatype":"Amount","desc":"Kwota rabatu.","support":"both"},
  {"level":4,"id":"invoiceline-price-allowancecharge-baseamount","parent":"invoiceline-price-allowancecharge","card":"0..1","name":"cbc:BaseAmount","datatype":"Amount","desc":"Cena brutto.","support":"both"}
];
 // Tab switching
        function switchTab(event, tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tab + '-tab').classList.add('active');
        }

        // Generate table rows with links to code lists
        function generateTable(tab) {
            const tbody = document.getElementById('tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol'));
            tbody.innerHTML = '';

            const data = ublData.filter(row => {
                if (tab === 'peppol') return row.support !== 'ubl';
                return true;
            });

            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.setAttribute('data-level', row.level);
                tr.setAttribute('data-id', row.id);
                if (row.parent) tr.setAttribute('data-parent', row.parent);
                tr.setAttribute('data-support', row.support);
                if (row.level > 1) tr.classList.add('hidden');

                // Card
                const cardTd = document.createElement('td');
                cardTd.className = 'card-cell';
                const cardSpan = document.createElement('span');
                cardSpan.className = row.card.startsWith('1') ? 'required' : 'optional';
                cardSpan.textContent = row.card;
                cardTd.appendChild(cardSpan);
                tr.appendChild(cardTd);

                // Name
                const nameTd = document.createElement('td');
                nameTd.className = 'name-cell indent-' + row.level;

                if (row.hasChildren) {
                    const toggleBtn = document.createElement('span');
                    toggleBtn.className = 'toggle-btn';
                    toggleBtn.textContent = '‚ñ∂';
                    toggleBtn.onclick = () => toggleChildren(row.id, tab);
                    nameTd.appendChild(toggleBtn);
                } else {
                    const noChildren = document.createElement('span');
                    noChildren.className = 'no-children';
                    nameTd.appendChild(noChildren);
                }

                if (row.level > 0) {
                    const bullet = document.createElement('span');
                    bullet.className = 'bullet';
                    bullet.textContent = ['‚Ä¢', '‚ó¶', '‚ñ™', '‚àô', '¬∑'][Math.min(row.level - 1, 4)];
                    nameTd.appendChild(bullet);
                }

                const nameText = row.name.split(':');
                if (nameText.length > 1) {
                    const nsSpan = document.createElement('span');
                    nsSpan.className = 'namespace';
                    nsSpan.textContent = nameText[0] + ':';
                    nameTd.appendChild(nsSpan);
                    nameTd.appendChild(document.createTextNode(nameText[1]));
                } else {
                    nameTd.appendChild(document.createTextNode(row.name));
                }

                if (row.hasChildren) {
                    const indicator = document.createElement('span');
                    indicator.className = 'collapsed-indicator';
                    indicator.textContent = ' [...]';
                    nameTd.appendChild(indicator);
                }
                tr.appendChild(nameTd);

                // Support
                const supportTd = document.createElement('td');
                supportTd.className = 'support-cell';
                const supportBadge = document.createElement('span');
                supportBadge.className = 'support-badge support-' + row.support;
                supportBadge.textContent = row.support === 'both' ? 'Oba' : (row.support === 'ubl' ? 'UBL' : 'Peppol');
                supportTd.appendChild(supportBadge);
                tr.appendChild(supportTd);

                // Data Type with link to code lists
                const typeTd = document.createElement('td');
                const typeSpan = document.createElement('span');
                typeSpan.className = 'datatype dt-' + row.datatype.toLowerCase();

                // Add link to code lists for Code types
                const codeListMap = {
                    'Code': getCodeListLink(row.name),
                    'Identifier': getIdentifierLink(row.name)
                };

                if (codeListMap[row.datatype]) {
                    const link = document.createElement('a');
                    link.href = '#';
                    link.textContent = row.datatype;
                    link.style.color = 'inherit';
                    link.style.textDecoration = 'none';
                    link.onclick = (e) => {
                        e.preventDefault();
                        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        document.querySelector('.tab:nth-child(4)').classList.add('active');
                        document.getElementById('codelists-tab').classList.add('active');
                        if (codeListMap[row.datatype]) {
                            setTimeout(() => {
                                const element = document.querySelector(codeListMap[row.datatype]);
                                if (element) element.scrollIntoView({behavior: 'smooth', block: 'start'});
                            }, 100);
                        }
                    };
                    typeSpan.appendChild(link);
                } else {
                    typeSpan.textContent = row.datatype;
                }

                typeTd.appendChild(typeSpan);
                tr.appendChild(typeTd);

                // Description
                const descTd = document.createElement('td');
                descTd.className = 'description-cell';
                descTd.textContent = row.desc;
                tr.appendChild(descTd);

                tbody.appendChild(tr);
            });
        }

        // Map field names to code list sections
        function getCodeListLink(fieldName) {
            const name = fieldName.toLowerCase();
            if (name.includes('currencycode')) return 'h2:contains("Waluty")';
            if (name.includes('countrysubentity') || name.includes('identificationcode') && name.includes('country')) return 'h2:contains("Kraje")';
            if (name.includes('invoicetypecode')) return 'h2:contains("Typy faktur")';
            if (name.includes('paymentmeanscode')) return 'h2:contains("Metody p≈Çatno≈õci")';
            if (name.includes('taxcategory') && name.includes('/id')) return 'h2:contains("Kategorie VAT")';
            if (name.includes('documenttypecode')) return 'h2:contains("typ√≥w dokument√≥w")';
            if (name.includes('allowancecharge') && name.includes('reasoncode')) return 'h2:contains("rabat√≥w/op≈Çat")';
            if (name.includes('itemclassificationcode')) return 'h2:contains("Klasyfikacje produkt√≥w")';
            return null;
        }

        function getIdentifierLink(fieldName) {
            const name = fieldName.toLowerCase();
            if (name.includes('endpointid')) return 'h3:contains("Electronic Address Scheme")';
            if (name.includes('standarditemidentification')) return 'h3:contains("Item Identifier Schemes")';
            return null;
        }

        function toggleChildren(parentId, tab) {
            const children = document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' [data-parent="' + parentId + '"]');
            const toggleBtn = event.target;
            const isExpanding = toggleBtn.textContent === '‚ñ∂';

            children.forEach(child => {
                child.classList.toggle('hidden');
                if (!isExpanding) {
                    const childId = child.getAttribute('data-id');
                    if (childId) collapseDescendants(childId, tab);
                }
            });

            toggleBtn.textContent = isExpanding ? '‚ñº' : '‚ñ∂';
            const row = toggleBtn.closest('tr');
            const indicator = row.querySelector('.collapsed-indicator');
            if (indicator) indicator.style.display = isExpanding ? 'none' : 'inline';
        }

        function collapseDescendants(parentId, tab) {
            const children = document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' [data-parent="' + parentId + '"]');
            children.forEach(child => {
                child.classList.add('hidden');
                const childId = child.getAttribute('data-id');
                if (childId) {
                    const toggleBtn = child.querySelector('.toggle-btn');
                    if (toggleBtn) toggleBtn.textContent = '‚ñ∂';
                    const indicator = child.querySelector('.collapsed-indicator');
                    if (indicator) indicator.style.display = 'inline';
                    collapseDescendants(childId, tab);
                }
            });
        }

        function expandAll(tab) {
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' tr.hidden').forEach(row => row.classList.remove('hidden'));
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' .toggle-btn').forEach(btn => btn.textContent = '‚ñº');
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' .collapsed-indicator').forEach(i => i.style.display = 'none');
        }

        function collapseAll(tab) {
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' tr').forEach(row => {
                if (parseInt(row.getAttribute('data-level')) > 1) row.classList.add('hidden');
            });
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' .toggle-btn').forEach(btn => btn.textContent = '‚ñ∂');
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' .collapsed-indicator').forEach(i => i.style.display = 'inline');
        }

        function expandLevel(tab, maxLevel) {
            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' tr').forEach(row => {
                const level = parseInt(row.getAttribute('data-level'));
                if (level <= maxLevel) {
                    row.classList.remove('hidden');
                    const toggleBtn = row.querySelector('.toggle-btn');
                    if (toggleBtn && level < maxLevel) toggleBtn.textContent = '‚ñº';
                } else {
                    row.classList.add('hidden');
                }
            });
        }

        function applyFilter(tab) {
            const filterBoth = document.getElementById('filter' + (tab === 'peppol' ? 'BothP' : 'Both')).checked;
            const filterOnly = document.getElementById('filter' + (tab === 'peppol' ? 'PeppolOnly' : 'UblOnly')).checked;

            document.querySelectorAll('#tableBody' + (tab === 'ubl' ? 'Ubl' : 'Peppol') + ' tr').forEach(row => {
                const support = row.getAttribute('data-support');
                let show = true;
                if (filterBoth || filterOnly) {
                    show = false;
                    if (filterBoth && support === 'both') show = true;
                    if (filterOnly && support !== 'both') show = true;
                }
                row.style.display = show ? '' : 'none';
            });
        }

        // Search
        ['Ubl', 'Peppol'].forEach(tab => {
            const searchBox = document.getElementById('searchBox' + tab);
            if (!searchBox) return;

            searchBox.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const tableRows = document.querySelectorAll('#tableBody' + tab + ' tr');

                if (searchTerm.length === 0) {
                    tableRows.forEach(row => {
                        row.style.display = '';
                        row.classList.remove('highlight');
                    });
                    collapseAll(tab.toLowerCase());
                    return;
                }

                tableRows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        row.style.display = '';
                        row.classList.add('highlight');
                        let parent = row.getAttribute('data-parent');
                        while (parent) {
                            const parentRow = document.querySelector('#tableBody' + tab + ' [data-id="' + parent + '"]');
                            if (parentRow) {
                                parentRow.style.display = '';
                                parentRow.classList.remove('hidden');
                                parent = parentRow.getAttribute('data-parent');
                            } else break;
                        }
                    } else {
                        row.style.display = 'none';
                        row.classList.remove('highlight');
                    }
                });
            });
        });

        // Initialize
        generateTable('ubl');
        generateTable('peppol');
        expandLevel('ubl', 1);
        expandLevel('peppol', 1);
    </script>
</body>
</html>
